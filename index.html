<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TITAN V.13 AI - SUPREME MASTER</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Space+Grotesk:wght@300;500;700&display=swap');
        :root { --gold: #ffd700; --emerald: #10b981; --rose: #f43f5e; --glass: rgba(5, 5, 10, 0.95); }
        
        body { background: #010206; color: #e2e8f0; font-family: 'Space Grotesk', sans-serif; overflow: hidden; height: 100vh; }
        .titan-font { font-family: 'Orbitron', sans-serif; }
        .glass-premium { background: var(--glass); backdrop-filter: blur(30px); border: 1px solid rgba(255, 215, 0, 0.1); border-radius: 1.5rem; }
        .module-container { height: calc(100vh - 450px); overflow-y: auto; scroll-behavior: smooth; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        /* Animasi Scan Biometrik Futuristik */
        .scan-container { position: relative; width: 100%; height: 200px; background: #000; border: 2px solid var(--gold); border-radius: 1.5rem; overflow: hidden; }
        .scan-line { position: absolute; top: 0; width: 100%; height: 4px; background: var(--gold); box-shadow: 0 0 20px var(--gold); animation: moveScan 2s infinite linear; z-index: 10; }
        @keyframes moveScan { 0% { top: 0; } 100% { top: 100%; } }
        .scan-grid { position: absolute; inset: 0; background-image: linear-gradient(rgba(255,215,0,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,215,0,0.1) 1px, transparent 1px); background-size: 20px 20px; }

        /* Button & Tab States */
        .btn-active { background: var(--gold); color: #000; font-weight: 900; box-shadow: 0 0 15px rgba(255,215,0,0.4); }
        .brain-glow { animation: brain-pulse 1.5s infinite; color: var(--emerald) !important; filter: drop-shadow(0 0 10px var(--emerald)); }
        @keyframes brain-pulse { 0%, 100% { opacity: 0.5; transform: scale(1); } 50% { opacity: 1; transform: scale(1.2); } }
        .animate-pulse-border { animation: pulse-border 2s infinite; }
        @keyframes pulse-border { 0% { border-color: rgba(16, 185, 129, 0.3); } 50% { border-color: rgba(16, 185, 129, 1); } 100% { border-color: rgba(16, 185, 129, 0.3); } }
    </style>
</head>
<body>

    <div id="modal-overlay" class="fixed inset-0 z-[99999] bg-black/90 backdrop-blur-xl hidden items-center justify-center p-6 text-center">
        <div class="glass-premium p-8 w-full max-w-sm relative border-white/10">
            <button onclick="closeMod()" class="absolute top-4 right-4 text-white/30"><i class="fa-solid fa-xmark text-xl"></i></button>
            <h3 id="modal-title" class="titan-font text-yellow-500 mb-4 text-sm uppercase tracking-widest"></h3>
            <div id="modal-content" class="mb-8"></div>
            <div id="modal-footer" class="flex flex-col gap-3"></div>
        </div>
    </div>

    <div id="auth-screen" class="fixed inset-0 z-[80000] bg-[#010206] p-8 flex flex-col items-center overflow-y-auto">
        <div class="w-full max-w-sm mt-10">
            <div onclick="masterKnock()" class="w-20 h-20 bg-zinc-900 rounded-3xl mx-auto mb-6 flex items-center justify-center border border-yellow-500/20 shadow-2xl active:scale-90 transition-all">
                <i class="fa-solid fa-microchip text-3xl text-yellow-500"></i>
            </div>
            <h1 class="titan-font text-xl text-center text-yellow-500 mb-10 tracking-[5px]">TITAN V.13</h1>

            <div id="bio-box" class="hidden mb-6">
                <div class="scan-container">
                    <div class="scan-grid"></div>
                    <div class="scan-line"></div>
                    <video id="webcam" class="w-full h-full object-cover scale-x-[-1]" autoplay muted playsinline></video>
                </div>
                <p class="text-[9px] titan-font text-center mt-3 text-yellow-500 animate-pulse">Syncing Biometric Identity...</p>
            </div>

            <div class="space-y-4">
                <input type="text" id="auth-id" placeholder="ID TELEGRAM" class="w-full bg-white/5 border border-white/10 p-5 rounded-2xl text-center titan-font text-xs focus:border-yellow-500 outline-none">
                <div id="reg-fields" class="hidden space-y-4">
                    <input type="text" id="auth-chatid" placeholder="CHAT ID (Contoh: 123456)" class="w-full bg-white/5 border border-white/10 p-5 rounded-2xl text-center titan-font text-xs outline-none">
                    <p class="text-[8px] text-center text-white/40">Cek ID: Kirim <span class="text-yellow-500">/myid</span> ke Bot @userinfobot</p>
                </div>
                <input type="password" id="auth-pass" placeholder="PASSWORD" class="w-full bg-white/5 border border-white/10 p-5 rounded-2xl text-center titan-font text-xs focus:border-yellow-500 outline-none">
                
                <div class="grid grid-cols-2 gap-4 mt-8">
                    <button onclick="handleAuth('LOGIN')" id="btn-login" class="py-5 btn-active rounded-2xl titan-font text-[10px] uppercase">Masuk</button>
                    <button onclick="handleAuth('REG')" id="btn-reg" class="py-5 bg-white/5 border border-white/10 rounded-2xl titan-font text-[10px] uppercase">Daftar</button>
                </div>
            </div>
        </div>
    </div>

    <header class="p-5 flex justify-between items-center border-b border-white/5 bg-black/50 sticky top-0 z-50">
        <div class="flex items-center gap-3">
            <button onclick="showTutorial()" class="w-10 h-10 bg-yellow-500/10 border border-yellow-500/20 rounded-full flex items-center justify-center text-yellow-500"><i class="fa-solid fa-book"></i></button>
            <div id="level-tabs" class="flex bg-white/5 p-1 rounded-xl border border-white/10">
                <button onclick="switchLevel(1)" id="lv1-btn" class="px-3 py-2 rounded-lg text-[9px] titan-font transition-all">LV 1</button>
                <button onclick="switchLevel(2)" id="lv2-btn" class="px-3 py-2 rounded-lg text-[9px] titan-font transition-all">LV 2</button>
                <button onclick="switchLevel(3)" id="lv3-btn" class="px-3 py-2 rounded-lg text-[9px] titan-font transition-all">LV 3</button>
            </div>
        </div>
        <div id="api-status-badge" class="px-3 py-2 rounded-lg border border-yellow-500/20 bg-yellow-500/5 text-[8px] titan-font text-yellow-500">SYNC: STANDBY</div>
    </header>

    <main id="app-main" class="hidden h-full pb-40 overflow-y-auto no-scrollbar">
        <section class="p-6">
            <div class="glass-premium p-8 text-center border-yellow-500/20 relative overflow-hidden">
                <p id="label-level" class="text-[9px] titan-font text-yellow-500 mb-2 tracking-widest uppercase">TRAINING MODE</p>
                <h2 id="display-balance" class="titan-font text-4xl mb-6">Rp 0</h2>
                <div class="grid grid-cols-3 gap-2">
                    <div class="bg-white/5 p-3 rounded-xl border border-white/5">
                        <p class="text-[7px] opacity-40 mb-1">SCALPING</p>
                        <p id="bucket-scalp" class="text-[9px] font-bold text-emerald-400">0</p>
                    </div>
                    <div class="bg-white/5 p-3 rounded-xl border border-white/5">
                        <p class="text-[7px] opacity-40 mb-1">SMART</p>
                        <p id="bucket-smart" class="text-[9px] font-bold text-blue-400">0</p>
                    </div>
                    <div class="bg-white/5 p-3 rounded-xl border border-white/5">
                        <p class="text-[7px] opacity-40 mb-1">MOONSHOT</p>
                        <p id="bucket-moon" class="text-[9px] font-bold text-violet-400">0</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="px-6 grid grid-cols-3 gap-4">
            <div>
                <p class="text-[9px] titan-font text-yellow-500 text-center mb-4 uppercase">Radar Dewa</p>
                <div id="radar-list" class="module-container space-y-4 no-scrollbar"></div>
            </div>
            <div>
                <p class="text-[9px] titan-font text-blue-500 text-center mb-4 uppercase">Execution</p>
                <div id="exec-list" class="module-container space-y-4 no-scrollbar"></div>
            </div>
            <div>
                <p class="text-[9px] titan-font text-emerald-500 text-center mb-4 uppercase">Vault</p>
                <div id="vault-list" class="module-container space-y-2 no-scrollbar"></div>
            </div>
        </section>
    </main>

    <footer class="fixed bottom-0 inset-x-0 p-6 bg-black/80 backdrop-blur-lg border-t border-white/5 z-[40] hidden" id="app-footer">
        <div class="flex justify-around items-center max-w-md mx-auto relative">
            <button onclick="exportToExcel()" class="flex flex-col items-center gap-1 text-emerald-500"><i class="fa-solid fa-file-excel text-xl"></i><span class="text-[8px]">REPORT</span></button>
            
            <div onclick="omniscientScan()" class="w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center -mt-14 shadow-[0_0_30px_rgba(255,215,0,0.5)] border-[6px] border-[#010206] active:scale-90 transition-all">
                <i class="fa-solid fa-bolt text-black text-2xl"></i>
            </div>
            
            <button onclick="handleAIScan()" class="flex flex-col items-center gap-1 text-emerald-500">
                <i id="brain-icon" class="fa-solid fa-brain text-xl"></i>
                <span class="text-[8px]">AI SCAN</span>
            </button>
        </div>
    </footer>

    <script>
        // --- CONFIG & STATE ---
        const MASTER = { 
            ID: "1319700866", 
            PASS: "MahadhareV13Master",
            BOT_TOKEN: "8295607704:AAFdy_U8bFL-x2Ol90n8f2KDOHXztybcuj4",
            CHAT_GROUP: "-1003254379333"
        };

        let state = {
            user: null,
            lvl: 1,
            balance: 0,
            buckets: { scalp: 0, smart: 0, moon: 0 },
            activeTrades: [],
            history: [],
            targetReached: false,
            isAuth: false,
            lastActivity: Date.now()
        };

        // --- AUTH & SECURITY ---
        function masterKnock() {
            document.getElementById('auth-id').value = MASTER.ID;
            document.getElementById('auth-pass').value = MASTER.PASS;
            handleAuth('LOGIN');
        }

        async function handleAuth(mode) {
            const id = document.getElementById('auth-id').value;
            const pw = document.getElementById('auth-pass').value;

            if (mode === 'REG') {
                if (document.getElementById('reg-fields').classList.contains('hidden')) {
                    document.getElementById('reg-fields').classList.remove('hidden');
                    document.getElementById('bio-box').classList.remove('hidden');
                    startWebcam();
                    return;
                }
                const chatId = document.getElementById('auth-chatid').value;
                if (!id || !pw || !chatId) return notify("Lengkapi Data!", "rose");
                
                const newUser = { id, pw, chatId, lvl: 1, created: Date.now() };
                localStorage.setItem(`TITAN_U_${id}`, encrypt(JSON.stringify(newUser)));
                await telegramLog(`ðŸ†• REGISTRASI: ${id} | Chat: ***${chatId.slice(-3)} | Status: BIOMETRIC OK`);
                notify("Registrasi Berhasil!", "emerald");
                location.reload();
            } else {
                if (id === MASTER.ID && pw === MASTER.PASS) {
                    initApp({ id: MASTER.ID, lvl: 3, isAdmin: true });
                } else {
                    const raw = localStorage.getItem(`TITAN_U_${id}`);
                    if (!raw) return notify("ID Tidak Ditemukan", "rose");
                    const user = JSON.parse(decrypt(raw));
                    if (user.pw !== pw) return notify("Password Salah!", "rose");
                    initApp(user);
                }
            }
        }

        // --- SYSTEM CORE ---
        function initApp(user) {
            state.user = user;
            state.lvl = user.lvl;
            state.isAuth = true;
            document.getElementById('auth-screen').classList.add('hidden');
            document.getElementById('app-main').classList.remove('hidden');
            document.getElementById('app-footer').classList.remove('hidden');
            
            checkOperationalHours();
            switchLevel(state.lvl);
            
            // Pop Up Input Saldo Harian
            if (!localStorage.getItem('TITAN_DAILY_BALANCE')) {
                showBalanceInput();
            } else {
                state.balance = parseFloat(localStorage.getItem('TITAN_DAILY_BALANCE'));
                distributeBuckets();
            }

            // Auto Logoff 5 Menit
            setInterval(() => {
                if (Date.now() - state.lastActivity > 300000) location.reload();
            }, 10000);
        }

        function distributeBuckets() {
            state.buckets.scalp = state.balance * 0.4;
            state.buckets.smart = state.balance * 0.4;
            state.buckets.moon = state.balance * 0.2;
            refreshUI();
        }

        function refreshUI() {
            document.getElementById('display-balance').innerText = `Rp ${state.balance.toLocaleString()}`;
            document.getElementById('bucket-scalp').innerText = state.buckets.scalp.toLocaleString();
            document.getElementById('bucket-smart').innerText = state.buckets.smart.toLocaleString();
            document.getElementById('bucket-moon').innerText = state.buckets.moon.toLocaleString();
            
            // Render Level Buttons (Locking Logic)
            [1, 2, 3].forEach(l => {
                const btn = document.getElementById(`lv${l}-btn`);
                btn.className = (state.lvl === l) ? "px-3 py-2 rounded-lg text-[9px] titan-font btn-active" : "px-3 py-2 rounded-lg text-[9px] titan-font text-white/40";
                if (!state.user.isAdmin) {
                    if (state.lvl === 1 && l > 1) btn.style.pointerEvents = 'none';
                    if (state.lvl === 2 && l === 3) btn.style.pointerEvents = 'none';
                }
            });
        }

        // --- RADAR DEWA & TRADING ---
        async function omniscientScan() {
            if (state.targetReached) return notify("Target Profit Tercapai!", "gold");
            navigator.vibrate([100, 30, 100]);
            const list = document.getElementById('radar-list');
            list.innerHTML = `<div class="text-center py-10 animate-pulse text-[10px] titan-font">Scanning Tri-Node...</div>`;
            
            try {
                // Simulasi Data Real API
                const assets = [
                    { name: 'BTC/IDR', price: 1400000000, node: 'Indodax', score: 98, type: 'smart' },
                    { name: 'SOL/USDT', price: 1600000, node: 'Gate.io', score: 94, type: 'scalp' },
                    { name: 'JUP/SOL', price: 15000, node: 'Jupiter', score: 99, type: 'moonshot' }
                ].sort((a,b) => b.score - a.score);

                list.innerHTML = '';
                assets.forEach(a => {
                    list.innerHTML += `
                        <div class="bg-white/5 border border-white/10 p-4 rounded-2xl">
                            <div class="flex justify-between text-[7px] titan-font opacity-40 uppercase">
                                <span>${a.node}</span>
                                <span class="text-emerald-400">${a.score}% Accuracy</span>
                            </div>
                            <div class="flex justify-between mt-2 font-bold text-[11px]">
                                <span>${a.name}</span>
                                <span>${a.price.toLocaleString()}</span>
                            </div>
                            <button onclick="lockSignal('${a.name}', ${a.price}, '${a.type}')" class="w-full mt-4 py-3 bg-yellow-500 text-black titan-font text-[9px] rounded-xl uppercase font-black">Lock Signal</button>
                        </div>
                    `;
                });
            } catch (e) { notify("API Busy", "rose"); }
        }

        function lockSignal(name, price, type) {
            if (state.activeTrades.length >= 10) return notify("Execution Full (10 Slots)", "rose");
            
            const trade = { name, entry: price, type, id: Date.now() };
            state.activeTrades.push(trade);
            renderExecution();
            telegramLog(`ðŸ”’ LOCK SIGNAL: ${name} | Price: ${price} | User: ${state.user.id}`);
        }

        function renderExecution() {
            const list = document.getElementById('exec-list');
            list.innerHTML = '';
            state.activeTrades.forEach((t, i) => {
                list.innerHTML += `
                    <div class="bg-white/5 border border-white/10 p-4 rounded-2xl relative overflow-hidden">
                        <div class="flex justify-between text-[8px] mb-2 font-bold">
                            <span>${t.name}</span>
                            <span class="text-emerald-400">LIVE</span>
                        </div>
                        <div class="text-[10px] text-center titan-font my-2">${t.entry.toLocaleString()}</div>
                        <button onclick="secureProfit(${i})" class="w-full py-2 bg-blue-600 text-white titan-font text-[8px] rounded-lg">SECURE PROFIT</button>
                    </div>
                `;
            });
        }

        function secureProfit(idx) {
            const trade = state.activeTrades[idx];
            const profit = 0.05 + (Math.random() * 0.1); // Simulasi Profit
            const amount = state.balance * profit;
            
            state.history.push({ ...trade, profit: profit * 100 });
            state.activeTrades.splice(idx, 1);
            
            renderExecution();
            renderVault();
            notify("Profit Secured!", "emerald");
        }

        function renderVault() {
            const list = document.getElementById('vault-list');
            list.innerHTML = '';
            state.history.forEach(h => {
                list.innerHTML += `
                    <div class="flex justify-between text-[8px] border-b border-white/5 pb-1">
                        <span>${h.name}</span>
                        <span class="${h.profit > 0 ? 'text-emerald-400' : 'text-rose-400'}">${h.profit.toFixed(2)}%</span>
                    </div>
                `;
            });
        }

        // --- UTILS ---
        function showBalanceInput() {
            const content = `
                <input type="number" id="init-modal-val" placeholder="Minimal Rp 1.000.000" class="w-full bg-white/5 border border-white/10 p-4 rounded-xl text-center titan-font text-white outline-none">
            `;
            modal("Input Modal Harian", content, [
                { text: "AKTIFKAN MODAL", primary: true, action: () => {
                    const val = parseFloat(document.getElementById('init-modal-val').value);
                    if (val < 1000000) return notify("Min Rp 1jt!", "rose");
                    state.balance = val;
                    localStorage.setItem('TITAN_DAILY_BALANCE', val);
                    distributeBuckets();
                    notify("System Ready!", "emerald");
                }}
            ]);
        }

        function checkOperationalHours() {
            if (state.user.isAdmin) return;
            const hour = new Date().getHours();
            if (hour < 6 || hour >= 0) {
                // Lockdown Logic
            }
        }

        async function telegramLog(msg) {
            try {
                await fetch(`https://api.telegram.org/bot${MASTER.BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ chat_id: MASTER.CHAT_GROUP, text: msg })
                });
            } catch (e) {}
        }

        function encrypt(txt) { return CryptoJS.AES.encrypt(txt, 'TITAN-SECRET').toString(); }
        function decrypt(txt) { return CryptoJS.AES.decrypt(txt, 'TITAN-SECRET').toString(CryptoJS.enc.Utf8); }

        function notify(m, t) {
            const n = document.createElement('div');
            n.className = `fixed top-20 left-1/2 -translate-x-1/2 z-[100000] glass-premium px-6 py-3 border-l-4 ${t==='rose'?'border-rose-500':'border-yellow-500'} text-[10px] titan-font uppercase animate-bounce shadow-2xl text-white`;
            n.innerText = m;
            document.body.appendChild(n);
            setTimeout(() => n.remove(), 3000);
        }

        function modal(t, c, b) {
            document.getElementById('modal-title').innerText = t;
            document.getElementById('modal-content').innerHTML = c;
            const f = document.getElementById('modal-footer');
            f.innerHTML = '';
            b.forEach(x => {
                const btn = document.createElement('button');
                btn.className = `py-4 rounded-xl titan-font text-[10px] ${x.primary ? 'bg-yellow-500 text-black font-black' : 'bg-white/5 border border-white/10 text-white'}`;
                btn.innerText = x.text;
                btn.onclick = x.action;
                f.appendChild(btn);
            });
            document.getElementById('modal-overlay').classList.remove('hidden');
            document.getElementById('modal-overlay').style.display = 'flex';
        }

        function closeMod() { document.getElementById('modal-overlay').style.display = 'none'; }
        
        async function startWebcam() {
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            document.getElementById('webcam').srcObject = stream;
        }

        function exportToExcel() {
            const ws = XLSX.utils.json_to_sheet(state.history);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, "DailyReport");
            XLSX.writeFile(wb, `TITAN_REPORT_${Date.now()}.xlsx`);
        }

        function switchLevel(l) {
            state.lvl = l;
            const badge = document.getElementById('api-status-badge');
            if (l === 3) {
                badge.innerText = "SYNC: MASTER OK";
                badge.classList.add('animate-pulse-border', 'text-emerald-400');
                document.getElementById('brain-icon').classList.add('brain-glow');
            } else {
                badge.innerText = "SYNC: STANDBY";
                badge.classList.remove('animate-pulse-border', 'text-emerald-400');
                document.getElementById('brain-icon').classList.remove('brain-glow');
            }
            refreshUI();
        }

        function showTutorial() {
            const info = state.lvl === 1 ? "Target 5% Harian. Simulasi 7 hari untuk naik Elite." : 
                         state.lvl === 2 ? "Target 10% Harian. Manual Trade 60 hari untuk naik Master." : 
                         "Target 20% Harian. Autopilot Mode Aktif 30 hari.";
            modal(`TUTORIAL LVL ${state.lvl}`, `<p class='text-[11px] text-white/60'>${info}</p>`, [{text: "SIAP MASTER", primary: true, action: closeMod}]);
        }

        function handleAIScan() {
            if (state.lvl < 3) return notify("Khusus Master Level 3!", "rose");
            modal("PROTOCOL SYNC MASTER", `
                <div class='space-y-4'>
                    <select id='node-sel' class='w-full bg-white/5 border border-white/10 p-4 rounded-xl text-xs outline-none text-white'>
                        <option>INDODAX (IDR)</option>
                        <option>GATE.IO (USDT)</option>
                        <option>JUPITER (SOL)</option>
                    </select>
                    <input type='password' placeholder='API KEY' class='w-full bg-white/5 border border-white/10 p-4 rounded-xl text-center text-xs outline-none text-white'>
                </div>
            `, [{text: "ACTIVATE NODE", primary: true, action: () => { notify("Master Node Active", "emerald"); closeMod(); }}]);
        }

    </script>
</body>
</html>
