<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>TITAN V13 - MAHADHARE GOLD ULTIMATE</title>
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;500;800&display=swap');
        :root { --gold: #ffd700; --bg: #010205; --glass: rgba(255, 255, 255, 0.03); }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background: var(--bg); color: #e2e8f0; font-family: 'Inter', sans-serif; overflow: hidden; height: 100vh; user-select: none; }
        .titan-font { font-family: 'Orbitron', sans-serif; }
        .glass-premium { background: var(--glass); backdrop-filter: blur(30px); border: 1px solid rgba(255, 215, 0, 0.1); border-radius: 1.5rem; }
        .btn-gold { background: linear-gradient(135deg, #ffd700 0%, #b8860b 100%); color: black; font-weight: 900; transition: 0.3s; }
        
        /* Layout */
        .head-sticky { position: sticky; top: 0; background: var(--bg); z-index: 50; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .module-scroll { height: calc(100vh - 610px); overflow-y: auto; scroll-behavior: smooth; }
        .module-scroll::-webkit-scrollbar { width: 2px; }
        .module-scroll::-webkit-scrollbar-thumb { background: var(--gold); }

        /* Level Switcher UI */
        .switch-btn { padding: 8px 14px; border-radius: 12px; font-size: 8px; font-family: 'Orbitron'; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.02); color: white; }
        .switch-active { background: var(--gold) !important; color: black !important; font-weight: 900; box-shadow: 0 0 15px rgba(255,215,0,0.3); }

        /* Pop-Up System */
        #modal-overlay { position: fixed; inset: 0; z-index: 200000; background: rgba(0,0,0,0.95); backdrop-filter: blur(20px); display: none; align-items: center; justify-content: center; padding: 24px; }
        .modal-active #modal-overlay { display: flex; }
        
        /* Floating Msg Left Side */
        #floating-msg { position: fixed; left: 20px; bottom: 100px; z-index: 90000; background: rgba(0,0,0,0.85); padding: 12px; border-left: 4px solid var(--gold); font-size: 10px; color: var(--gold); border-radius: 0 8px 8px 0; pointer-events: none; transition: 0.5s; opacity: 0.5; }
        
        @keyframes scanLine { 0% { top: 0; } 100% { top: 100%; } }
        .locked-wallet { position: relative; cursor: not-allowed; opacity: 0.5; }
    </style>
</head>
<body>

<div id="lockdown-screen" class="fixed inset-0 z-[300000] bg-red-950 flex flex-col items-center justify-center p-10 text-center hidden">
    <i class="fa-solid fa-shield-slash text-8xl text-white mb-6 animate-pulse"></i>
    <h1 class="titan-font text-3xl text-white uppercase">SYSTEM BREACH</h1>
    <p class="text-white/60 text-sm">IP dan Perangkat Anda telah diblokir permanen.</p>
</div>

<div id="auth-screen" class="fixed inset-0 z-[50000] bg-[#010205] flex flex-col items-center p-8 overflow-y-auto">
    <div class="mt-12 mb-10 flex flex-col items-center text-center">
        <div id="biometric-box" class="w-32 h-32 glass-premium border-yellow-500/30 flex items-center justify-center relative overflow-hidden mb-4">
            <i id="logo-main" class="fa-solid fa-eye text-6xl text-yellow-500 drop-shadow-[0_0_20px_#ffd700]"></i>
            <div id="webcam-box" class="absolute inset-0 hidden">
                <div style="width:100%; height:100%; position:relative;">
                    <div style="position:absolute; width:100%; height:2px; background:var(--gold); animation: scanLine 2s infinite; z-index:10;"></div>
                    <div class="bg-yellow-500/10 w-full h-full"></div>
                </div>
            </div>
        </div>
        <h1 class="titan-font text-2xl text-yellow-500 tracking-[0.4em]">TITAN V13</h1>
        <p class="text-[8px] opacity-30 tracking-[0.5em] uppercase font-bold text-white">Mahadhare Gold Ultimate</p>
    </div>

    <div class="w-full max-w-sm space-y-4" id="auth-form-container">
        <input type="text" id="user-phone" placeholder="Nomor Telegram (62...)" class="w-full bg-white/5 p-4 rounded-xl border border-white/10 text-white text-center outline-none focus:border-gold titan-font text-sm uppercase">
        <input type="password" id="user-pass" placeholder="Password" class="w-full bg-white/5 p-4 rounded-xl border border-white/10 text-white text-center outline-none font-black tracking-widest focus:border-gold">
        <button onclick="processAuth()" class="btn-gold w-full py-4 titan-font rounded-2xl shadow-xl active:scale-95 transition-all">VALIDASI IDENTITAS</button>
        <div class="flex justify-between items-center px-2">
            <button onclick="window.open('https://t.me/userinfobot')" class="text-[9px] text-blue-400 font-bold uppercase">Dapatkan Chat ID</button>
            <span id="auth-toggle" onclick="toggleAuthMode()" class="text-[9px] text-white/30 uppercase cursor-pointer">Mode: Daftar</span>
        </div>
    </div>

    <div id="biometric-loader" class="hidden text-center mt-10">
        <p class="text-gold animate-pulse titan-font text-xs">MEMINDAI WAJAH & IP...</p>
    </div>
</div>

<div id="app-shell" class="hidden flex-col h-screen">
    <header class="p-5 flex justify-between items-center bg-black/40 border-b border-white/5 relative z-[120000]">
        <div onclick="masterSecretTap()" class="flex items-center gap-3 cursor-pointer">
            <span class="text-xl">üëÅÔ∏è</span>
            <div>
                <p id="user-badge" class="text-[9px] text-gold font-bold uppercase tracking-widest">STANDARD</p>
                <div class="flex items-center gap-2">
                    <div class="w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"></div>
                    <p id="online-counter" class="text-[7px] text-emerald-500 font-black titan-font uppercase"></p>
                </div>
            </div>
        </div>

        <div class="level-nav flex gap-2 bg-black/50 p-1 rounded-full border border-white/5">
            <button class="switch-btn active" id="btn-lv1" onclick="jumpLevel(1)">L1</button>
            <button class="switch-btn" id="btn-lv2" onclick="jumpLevel(2)">L2</button>
            <button class="switch-btn" id="btn-lv3" onclick="jumpLevel(3)">L3</button>
        </div>
        
        <button onclick="initLogout()" class="text-rose-500 text-xl active:scale-90 transition-all">‚èª</button>
    </header>

    <main class="flex-1 overflow-y-auto p-4 pb-32 no-scrollbar">
        <section class="mb-6 glass-premium p-4">
            <h3 class="text-[8px] titan-font text-blue-400 mb-3 uppercase tracking-widest"><i class="fa-solid fa-ranking-star mr-2"></i>Global Level Board</h3>
            <div id="leader-list-head" class="grid grid-cols-3 gap-2"></div>
        </section>

        <div class="glass-premium p-6 text-center mb-6 border border-gold/20">
            <div style="font-size: 11px; opacity: 0.6;" class="titan-font">EQUITY (AUTO-COMPOUND)</div>
            <h1 id="bal-val" class="titan-font text-gold text-4xl my-4 tracking-tighter">Rp 0</h1>
            <div class="flex justify-around text-[10px] titan-font">
                <div>SLOTS: <span id="slot-val" class="text-gold">0/10</span></div>
                <div>DAILY: <span id="prof-val" class="text-gold">0%</span></div>
                <div id="api-status" class="text-rose-500">API: OFF</div>
            </div>
        </div>

        <div id="api-panel" class="hidden mb-6 p-4 glass-premium border-emerald-500/30">
            <div class="flex justify-between mb-3"><span class="text-[8px] text-emerald-500 titan-font uppercase font-bold">Autopilot API Sync</span></div>
            <input type="password" id="ak" placeholder="API Key Indodax" class="w-full bg-black/40 p-3 rounded-xl border border-white/10 text-[9px] text-white mb-2 outline-none">
            <input type="password" id="as" placeholder="API Secret" class="w-full bg-black/40 p-3 rounded-xl border border-white/10 text-[9px] text-white mb-3 outline-none">
            <button onclick="saveAPI()" class="btn-gold w-full py-2.5 text-[8px] rounded-xl font-black uppercase">Link Global Node</button>
        </div>

        <div class="grid grid-cols-3 gap-4 head-sticky font-bold text-[9px] titan-font uppercase text-center">
            <div class="text-emerald-400">Radar Dewa</div>
            <div class="text-blue-400 border-x border-white/5">Execution</div>
            <div class="text-gold">History</div>
        </div>

        <div class="grid grid-cols-3 gap-4">
            <div id="radar-list" class="module-scroll space-y-4"></div>
            <div id="exec-list" class="module-scroll space-y-4 border-x border-white/5 px-2"></div>
            <div id="hist-list" class="module-scroll space-y-2 opacity-50"></div>
        </div>
    </main>

    <footer class="fixed bottom-0 w-full bg-black/90 backdrop-blur-xl p-5 flex justify-around border-t border-white/5 z-[100]">
        <div onclick="showTutorial()" class="text-center cursor-pointer"><i class="fa-solid fa-book-open text-gold"></i><br><small class="text-[8px] font-bold">MANUAL</small></div>
        <div onclick="openLink('tg_group')" class="text-center cursor-pointer"><i class="fa-solid fa-users text-sky-400"></i><br><small class="text-[8px] font-bold">GROUP</small></div>
        <div id="nav-wallet" onclick="handleWalletClick()" class="text-center cursor-pointer"><i class="fa-solid fa-wallet text-gold"></i><br><small class="text-[8px] font-bold">WALLET</small></div>
        <div class="text-center opacity-50"><small class="text-[7px]">ROADMAP L3<br>180 DAYS</small></div>
    </footer>
</div>

<div id="floating-msg">Titan Engine Ready...</div>

<div id="modal-global" class="modal-overlay">
    <div class="modal-box glass-premium p-8 max-w-sm w-full border border-gold/30 text-center">
        <div id="modal-content"></div>
    </div>
</div>

<script>
/**
 * TITAN V13 - INTEGRATED SUPREME CORE
 */
const CONFIG = {
    bot_token: "8295607704:AAFdy_U8bFL-x2Ol90n8f2KDOHXztybcuj4",
    group_id: "-1003254379333",
    admin_id: "1319700866",
    master_key: "MahadhareV13Master",
    links: {
        indodax: "https://indodax.onelink.me/qyYY/referral?deep_link_value=page:register,id:marselsalmon",
        gate: "https://www.gate.com/referral/cashback?ref=VQUQVVWJUG",
        tg_group: "https://t.me/+8uJ78T4VDHJkOTRl"
    }
};

let db = {
    user: null, level: 1, balance: 1000000, 
    dailyProfit: 0, slots: [], history: [], 
    xp: 0, api_key: null, api_secret: null,
    isMaster: false, taps: 0, lastActive: Date.now()
};

let isRegMode = false;

// --- 1. DAFTAR, LOGIN & LOGOUT (Sistem Anda) ---
function toggleAuthMode() {
    isRegMode = !isRegMode;
    document.getElementById('auth-toggle').innerText = isRegMode ? "Mode: Login" : "Mode: Daftar";
}

function processAuth() {
    const phone = document.getElementById('user-phone').value;
    const pass = document.getElementById('user-pass').value;

    if (phone === CONFIG.admin_id && pass === CONFIG.master_key) {
        db.user = "ADMIN MASTER"; db.level = 3; db.balance = 1000000000; db.isMaster = true;
        return enterApp();
    }

    if (phone.length > 8 && pass.length >= 6) {
        document.getElementById('auth-form-container').classList.add('hidden');
        document.getElementById('biometric-loader').classList.remove('hidden');
        setTimeout(() => {
            db.user = phone;
            enterApp();
        }, 3000);
    } else {
        showToast("Identitas Tidak Valid!", "rose");
    }
}

function enterApp() {
    document.getElementById('auth-screen').classList.add('hidden');
    document.getElementById('app-shell').style.display = 'flex';
    loadPersistance();
    updateUI();
    smartScan();
    setInterval(engineUpdate, 8000); // Mata Dewa
    setInterval(updateLiveStats, 10000);
    showToast("SYSTEM ONLINE", "emerald");
}

function initLogout() {
    showModal(`
        <h3 class="titan-font text-gold mb-4">LOGOUT SYSTEM</h3>
        <p class="text-[10px] text-white/60 mb-6">Keluar dari sesi trading Mahadhare?</p>
        <button onclick="executeLogout()" class="btn-gold w-full py-3 rounded-xl mb-2">YA, KELUAR</button>
        <button onclick="closeModal()" class="w-full py-3 text-white/40 text-[10px]">BATAL</button>
    `);
}

function executeLogout() {
    db.user = null;
    savePersistance();
    location.reload(); // Reset total ke tampilan Auth
}

// --- 2. LOGIKA TRADING AI (MATA DEWA) ---
async function engineUpdate() {
    if (!db.user) return;
    processTSL();
    updateUI();
}

async function smartScan() {
    const coins = ['BTC', 'ETH', 'SOL', 'PEPE', 'BNB', 'DOGE', 'SHIB', 'ADA', 'TRX', 'MATIC'];
    const list = document.getElementById('radar-list');
    list.innerHTML = '';

    coins.forEach(coin => {
        const rsi = Math.floor(Math.random() * (70 - 18) + 18);
        const strength = Math.floor(Math.random() * 35 + 65);
        const isMoon = rsi < 25;
        const stake = db.balance * 0.1;

        if (db.level === 3 && strength >= 95 && db.slots.length < 10) executeTrade(coin, stake, true);

        list.innerHTML += `
            <div class="glass-premium p-3 border-white/5 mb-3">
                <div class="flex justify-between items-center mb-2">
                    <b class="text-[10px] text-gold">${coin}/IDR</b>
                    ${isMoon ? '<span class="bg-purple-600 text-[6px] px-2 py-0.5 rounded">MOONSHOT</span>' : ''}
                </div>
                <div class="text-[8px] opacity-50 mb-3">Strength: ${strength}% | RSI: ${rsi}</div>
                <button onclick="lockSignal('${coin}', ${stake})" class="btn-gold w-full py-1.5 text-[8px] rounded-lg">LOCK</button>
            </div>
        `;
    });
}

function lockSignal(coin, stake) {
    if (db.slots.length >= 10) return showToast("Slots Full!", "danger");
    const limit = db.level === 1 ? 5 : 10;
    if (db.dailyProfit >= limit) return showToast(`Target ${limit}% Tercapai!`, "danger");
    executeTrade(coin, stake, false);
}

function executeTrade(coin, stake, isAuto) {
    db.slots.push({ id: Date.now(), coin, stake, profit: 0, high: 0, isAuto });
    db.balance -= stake;
    showToast(`${coin} LOCKED`, "success");
    if (db.level >= 2) sendTelegram(`üö® *${isAuto ? 'AUTO' : 'MANUAL'} BUY*\nAsset: ${coin}\nStake: Rp ${stake.toLocaleString()}`);
}

function processTSL() {
    db.slots.forEach((t, i) => {
        const move = (Math.random() * 5) - 2;
        t.profit += move;
        if (t.profit > t.high) t.high = t.profit;
        const drop = t.high - t.profit;

        if (drop >= 2 || t.profit >= (db.level === 1 ? 2 : 7)) {
            const profitNominal = (t.stake * t.profit) / 100;
            db.balance += (t.stake + profitNominal);
            db.dailyProfit += t.profit;
            db.history.unshift({ coin: t.coin, res: t.profit.toFixed(2), time: new Date().toLocaleTimeString() });
            db.slots.splice(i, 1);
            db.xp += 25;
            if (db.level >= 2) sendTelegram(`‚úÖ *PROFIT SECURED*\nAsset: ${t.coin}\nGain: ${t.profit.toFixed(2)}%`);
        }
    });
}

// --- 3. LEVELING & GLOBAL STATS ---
function jumpLevel(target) {
    if (db.isMaster) { db.level = target; return updateUI(); }
    if (target === 2 && db.xp < 150) return showToast("Butuh 150 XP!", "danger");
    if (target === 2 && db.level === 1) return showEliteChecklist();
    if (target === 3 && db.level < 2) return showToast("Level 2 Dulu!", "danger");
    if (target === 3) { document.getElementById('api-panel').classList.toggle('hidden'); return; }
    db.level = target;
    updateUI();
}

function showEliteChecklist() {
    showModal(`
        <h3 class="titan-font text-gold mb-4">AKTIVASI ELITE</h3>
        <div class="text-left text-[11px] space-y-3 mb-6">
            <label class="block"><input type="checkbox" id="chk1"> Daftar Indodax Master Reff (Wajib)</label>
            <label class="block"><input type="checkbox" id="chk2"> Gabung Group Telegram</label>
            <label class="block"><input type="checkbox" id="chk3"> Setujui Perjanjian Risiko</label>
        </div>
        <button onclick="validateElite()" class="btn-gold w-full py-3 rounded-xl">AKTIFKAN MODE RIIL</button>
    `);
}

function validateElite() {
    if (document.getElementById('chk1').checked && document.getElementById('chk2').checked) {
        db.level = 2; closeModal(); updateUI();
        showToast("STATUS ELITE AKTIF", "success");
    }
}

function saveAPI() {
    if (document.getElementById('ak').value.length > 5) {
        db.level = 3; document.getElementById('api-panel').classList.add('hidden');
        updateUI(); showToast("AUTOPILOT SYNCED", "success");
    }
}

function updateLiveStats() {
    const counter = document.getElementById('online-counter');
    const leaders = [`Admin (L3)`, `ID 882x (L3)`, `ID 102x (L2)`];
    if(db.level === 1) {
        counter.innerText = `${(Math.floor(Math.random()*500)+9000).toLocaleString()} Members Online`;
    } else {
        counter.innerText = `${(Math.floor(Math.random()*20)+110)} Elites Online`;
    }
    document.getElementById('leader-list-head').innerHTML = leaders.map((l, i) => `
        <div class="bg-white/5 p-2 rounded-xl text-center border border-white/5">
            <p class="text-[6px] opacity-40 uppercase mb-1">Rank ${i+1}</p>
            <p class="text-[7px] text-white font-black truncate">${l}</p>
        </div>`).join('');
}

function updateUI() {
    document.getElementById('bal-val').innerText = `Rp ${Math.floor(db.balance).toLocaleString()}`;
    document.getElementById('slot-val').innerText = `${db.slots.length}/10`;
    document.getElementById('prof-val').innerText = `${db.dailyProfit.toFixed(1)}%`;
    const badges = ["STANDARD", "ELITE", "MASTER"];
    document.getElementById('user-badge').innerText = badges[db.level - 1];
    document.getElementById('api-status').innerText = db.level === 3 ? "API: CONNECTED" : "API: OFF";
    document.getElementById('api-status').style.color = db.level === 3 ? "var(--success)" : "var(--danger)";
    
    document.querySelectorAll('.switch-btn').forEach((b, i) => b.classList.toggle('switch-active', db.level === i + 1));
    
    const wallet = document.getElementById('nav-wallet');
    if (db.level === 1 && !db.isMaster) wallet.classList.add('locked-wallet');
    else wallet.classList.remove('locked-wallet');

    renderExecution();
    renderHistory();
    savePersistance();
}

function renderExecution() {
    const list = document.getElementById('exec-list');
    list.innerHTML = db.slots.map(t => `
        <div class="card glass-premium p-3 border-l-2 border-blue-500 mb-2">
            <div class="flex justify-between text-[10px]"><b>${t.coin}</b> <b class="${t.profit >= 0 ? 'text-emerald-400' : 'text-rose-500'}">${t.profit.toFixed(2)}%</b></div>
            <div class="text-[7px] opacity-50 mt-1">TSL GUARD ACTIVE</div>
        </div>
    `).join('');
}

function renderHistory() {
    document.getElementById('hist-list').innerHTML = db.history.slice(0, 8).map(h => `
        <div class="flex justify-between text-[8px] py-1 border-b border-white/5">
            <span>${h.coin}</span><span class="text-emerald-400">+${h.res}%</span>
        </div>
    `).join('');
}

// --- UTILS ---
function showToast(msg, type) {
    const f = document.getElementById('floating-msg');
    f.innerText = msg; f.style.opacity = 1;
    setTimeout(() => f.style.opacity = 0.5, 3000);
}
function showModal(html) { document.getElementById('modal-content').innerHTML = html; document.body.classList.add('modal-active'); }
function closeModal() { document.body.classList.remove('modal-active'); }
function openLink(k) { window.open(CONFIG.links[k] || CONFIG.links.indodax, '_blank'); }
function handleWalletClick() { if (db.level === 1 && !db.isMaster) return showToast("Terkunci di L1", "rose"); openLink('indodax'); }
function masterSecretTap() { db.taps++; if (db.taps >= 5) { const k = prompt("MASTER:"); if (k === CONFIG.master_key) { db.isMaster = true; db.level = 3; db.balance = 1000000000; updateUI(); } db.taps = 0; } }
async function sendTelegram(msg) { fetch(`https://api.telegram.org/bot${CONFIG.bot_token}/sendMessage?chat_id=${CONFIG.group_id}&text=${encodeURIComponent(msg)}&parse_mode=Markdown`); }
function savePersistance() { localStorage.setItem('titan_v13_final', JSON.stringify(db)); }
function loadPersistance() { const saved = localStorage.getItem('titan_v13_final'); if (saved) { const p = JSON.parse(saved); if (p.user === db.user) db = p; } }
function showTutorial() { showModal(`<h3 class="titan-font text-gold mb-4">PANDUAN TITAN</h3><p class="text-[10px] text-left text-white/70">1. Level 1 (Simulation): Kumpulkan XP hingga 150.<br>2. Level 2 (Elite): Trading riil manual via link referral.<br>3. Level 3 (Master): Autopilot penuh via API Sync.</p><button onclick="closeModal()" class="btn-gold w-full py-2 mt-4 rounded-lg">MENGERTI</button>`); }
</script>
</body>
</html>
