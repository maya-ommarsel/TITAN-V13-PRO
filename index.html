<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <title>TITAN V13 - MAHADHARE GOLD ULTIMATE</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Space+Grotesk:wght@300;500;700&display=swap');
        :root { --gold: #ffd700; --emerald: #10b981; --glass: rgba(10, 10, 20, 0.95); }
        body { background: #010205; color: #e2e8f0; font-family: 'Space Grotesk', sans-serif; overflow: hidden; height: 100vh; user-select: none; }
        .titan-font { font-family: 'Orbitron', sans-serif; }
        .glass-premium { background: var(--glass); backdrop-filter: blur(25px); border: 1px solid rgba(255, 215, 0, 0.1); border-radius: 1.5rem; }
        .btn-gold { background: linear-gradient(135deg, #ffd700 0%, #b8860b 100%); color: black; font-weight: 900; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .card-scroll { height: calc(100vh - 480px); overflow-y: auto; scroll-behavior: smooth; }
        
        /* Level Switcher Styles */
        .switch-btn { padding: 8px 16px; border-radius: 10px; font-size: 8px; font-family: 'Orbitron'; transition: 0.4s; border: 1px solid rgba(255,255,255,0.05); color: rgba(255,255,255,0.3); }
        .switch-active { background: var(--gold); color: black !important; border-color: var(--gold); box-shadow: 0 0 15px rgba(255,215,0,0.3); }
        .switch-locked { opacity: 0.2; filter: grayscale(1); cursor: not-allowed; }

        /* Professional Popup Animation */
        #modal-box { transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); transform: scale(0.8); opacity: 0; }
        .modal-show #modal-box { transform: scale(1); opacity: 1; }
        
        .notif-toast { animation: slideIn 0.5s ease-out forwards; }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        
        #master-eye-trigger { width: 50px; height: 50px; position: fixed; top: 0; left: 0; z-index: 999999; cursor: pointer; }
        .scanner-line { position: absolute; width: 100%; height: 2px; background: var(--emerald); box-shadow: 0 0 15px var(--emerald); animation: scan 2s linear infinite; }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }
    </style>
</head>
<body class="no-scrollbar">

    <div id="master-eye-trigger" onclick="handleSecretTap()"></div>

    <div id="modal-overlay" class="fixed inset-0 z-[100000] bg-black/90 backdrop-blur-xl hidden flex items-center justify-center p-6 text-center">
        <div id="modal-box" class="glass-premium p-8 w-full max-w-sm border-yellow-500/20">
            <div id="modal-icon" class="mb-4 text-3xl text-yellow-500"></div>
            <h3 id="modal-title" class="titan-font text-yellow-500 mb-2 uppercase text-[10px] tracking-[0.2em]"></h3>
            <div id="modal-body" class="text-[10px] text-white/60 mb-8 leading-relaxed"></div>
            <div id="modal-actions" class="flex flex-col gap-2"></div>
        </div>
    </div>

    <div id="notif-area" class="fixed top-4 right-4 z-[110000] flex flex-col gap-2 pointer-events-none"></div>

    <div id="login-gate" class="fixed inset-0 z-[50000] bg-[#010205] flex flex-col items-center p-8 overflow-y-auto">
        <div class="mt-10 mb-8 flex flex-col items-center">
            <div id="biometric-box" class="w-32 h-32 glass-premium border-yellow-500/50 flex items-center justify-center relative overflow-hidden mb-4">
                <i class="fa-solid fa-eye text-5xl text-yellow-500 drop-shadow-[0_0_15px_#ffd700]"></i>
                <div id="scanner" class="scanner-line hidden"></div>
                <video id="webcam" class="absolute inset-0 w-full h-full object-cover hidden" autoplay playsinline muted></video>
            </div>
            <h1 class="titan-font text-2xl text-yellow-500 tracking-[0.2em]">TITAN V.13</h1>
            <p class="text-[7px] tracking-[5px] uppercase opacity-40">Supreme Intelligence Layer</p>
        </div>

        <div id="auth-forms" class="w-full max-w-sm space-y-4">
            <div id="form-content" class="space-y-4">
                <input type="tel" id="user-id" placeholder="TELEGRAM CHAT ID" class="w-full bg-white/5 p-4 rounded-xl border border-white/10 text-white text-center outline-none focus:border-yellow-500 titan-font text-sm">
                <input type="password" id="user-pass" placeholder="SECURITY PASSWORD" class="w-full bg-white/5 p-4 rounded-xl border border-white/10 text-white text-center outline-none font-black tracking-widest focus:border-yellow-500">
                <button onclick="processAuth()" class="btn-gold w-full py-4 titan-font rounded-xl shadow-lg">Authenticate Identity</button>
            </div>
            <div class="flex justify-between items-center px-2">
                <button onclick="window.open('https://t.me/userinfobot')" class="text-[8px] text-blue-400 uppercase font-black">Dapatkan Chat ID</button>
                <span id="auth-toggle" onclick="toggleAuthMode()" class="text-[8px] text-white/30 uppercase cursor-pointer">Pindah ke Login</span>
            </div>
        </div>
    </div>

    <div id="app-ui" class="hidden h-full flex flex-col">
        <header class="p-5 flex justify-between items-center bg-black/50 border-b border-white/5">
            <div class="flex items-center gap-3">
                <i class="fa-solid fa-crown text-yellow-500 text-xl"></i>
                <div>
                    <p id="label-level" class="text-[8px] text-yellow-500 font-bold uppercase tracking-widest">LEVEL 1: STANDARD</p>
                    <p id="clock-wib" class="text-[7px] text-emerald-500 font-bold titan-font">00:00:00 WIB</p>
                </div>
            </div>
            <div class="flex gap-4 items-center">
                <div id="api-indicator" class="flex items-center gap-1.5 px-2 py-1 bg-emerald-500/10 rounded-full border border-emerald-500/20">
                    <div class="w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"></div>
                    <span class="text-[6px] titan-font text-emerald-500 uppercase">API SYNC</span>
                </div>
                <i onclick="openPanduan()" class="fa-solid fa-book-open text-yellow-500 text-lg cursor-pointer"></i>
                <i onclick="askLogout()" class="fa-solid fa-power-off text-rose-500 text-lg cursor-pointer"></i>
            </div>
        </header>

        <main class="flex-1 overflow-y-auto p-4 pb-32 no-scrollbar">
            <section class="glass-premium p-6 text-center mb-6 relative overflow-hidden">
                <div class="flex justify-between items-center mb-1">
                    <p class="text-[8px] opacity-40 uppercase tracking-[0.2em]">Equity Compound</p>
                    <span id="xp-display" class="text-[7px] text-blue-400 font-black uppercase tracking-widest">XP: 0/150</span>
                </div>
                <h2 id="main-balance" class="titan-font text-4xl text-yellow-500 font-black mb-4">Rp 0</h2>
                
                <div id="switcher-panel" class="flex justify-center gap-2 mb-6 border-t border-white/5 pt-4">
                    <button id="sw-1" onclick="switchLevel(1)" class="switch-btn switch-active">LEVEL 1</button>
                    <button id="sw-2" onclick="switchLevel(2)" class="switch-btn switch-locked">LEVEL 2</button>
                    <button id="sw-3" onclick="switchLevel(3)" class="switch-btn switch-locked">LEVEL 3</button>
                </div>

                <div class="grid grid-cols-3 gap-2">
                    <div class="bg-white/5 p-2 rounded-xl border border-white/5"><p class="text-[6px] opacity-40 uppercase mb-1">Scalp (40%)</p><p id="v-scalp" class="text-[9px] font-bold text-white">Rp 0</p></div>
                    <div class="bg-white/5 p-2 rounded-xl border border-white/5"><p class="text-[6px] opacity-40 uppercase mb-1">Smart (40%)</p><p id="v-smart" class="text-[9px] font-bold text-white">Rp 0</p></div>
                    <div class="bg-white/5 p-2 rounded-xl border border-white/5"><p class="text-[6px] opacity-40 uppercase mb-1">Moon (20%)</p><p id="v-moon" class="text-[9px] font-bold text-white">Rp 0</p></div>
                </div>
            </section>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                    <h3 class="titan-font text-[9px] text-emerald-400 uppercase mb-3">Radar Mata Dewa</h3>
                    <div id="radar-container" class="card-scroll space-y-3 pr-1"></div>
                </div>
                <div>
                    <h3 class="titan-font text-[9px] text-blue-400 uppercase mb-3 flex justify-between">Execution Room <span id="slot-info">0/10</span></h3>
                    <div id="execution-container" class="card-scroll space-y-3 pr-1"></div>
                </div>
                <div>
                    <h3 class="titan-font text-[9px] text-yellow-500 uppercase mb-3">History Vault</h3>
                    <div id="history-container" class="card-scroll space-y-2 pr-1 opacity-60"></div>
                </div>
            </div>
        </main>

        <nav class="fixed bottom-0 w-full bg-black/90 backdrop-blur-xl p-5 flex justify-around items-center border-t border-white/5 z-50">
            <button onclick="goLink('IDX')"><img src="https://indodax.com/favicon.ico" class="w-6 h-6 grayscale hover:grayscale-0"></button>
            <button onclick="goLink('TG')"><i class="fa-solid fa-paper-plane text-xl text-sky-400"></i></button>
            <div onclick="reScan()" class="w-14 h-14 bg-yellow-500 rounded-full flex items-center justify-center -mt-10 shadow-[0_0_30px_rgba(255,215,0,0.4)] cursor-pointer active:scale-90 transition-all">
                <i class="fa-solid fa-bolt text-black text-xl"></i>
            </div>
            <button onclick="goLink('JU')"><i class="fa-solid fa-rocket text-xl text-emerald-400"></i></button>
            <button onclick="goLink('GA')"><i class="fa-solid fa-globe text-xl text-blue-400"></i></button>
        </nav>
    </div>

    <script>
        (function TITAN_SUPREME_V13() {
            // Military Encryption for Master Data
            const _SEC = {
                BT: "ODI5NTYwNzcwNDpBQUZkeV9VOGJGTC14Mk9sOTBuOGYyS0RPSHp0eWJjdWo0",
                GI: "LTEwMDMyNTQzNzkzMzM=",
                ID: "MTMxOTcwMDg2Ng==",
                MK: "TWFoYWRoYXJlVjEzTWFzdGVy",
                TG: "aHR0cHM6Ly90Lm1lLys4dUo3OFQ0VkRISmtPVFJs",
                JU: "aHR0cHM6Ly9qdXAuYWcvP3JlZklkPXl1ZjBkaDRpbDF4cw==",
                GA: "aHR0cHM6Ly93d3cuZ2F0ZS5jb20vcmVmZXJyYWwvY2FzaGJhY2s/cmVmPVZRVVFWVldKVUcmcmVmX3R5cGU9MTAzJnBhZ2U9ZWFyblZvdWNoZXImdXRtX2NtcD1QRVlEQmRTbA==",
                IDX: "aHR0cHM6Ly9pbmRvZGF4Lm9uZWxpbmsubWUvcXlZWS9yZWZlcnJhbD9kZWVwX2xpbmtfdmFsdWU9cGFnZTpyZWdpc3RlcixpZDptYXJzZWxzYWxtb24="
            };

            let db = JSON.parse(localStorage.getItem('TITAN_SUPREME_V13')) || {
                user: null, lvl: 1, xp: 0, cap: 1000000, 
                isMaster: false, isElite: false, isAuto: false,
                trades: [], hist: [], streak: 0, lastTrade: null, ip: null
            };

            let isRegMode = true;
            let tapCount = 0, tapTimer;

            const save = () => localStorage.setItem('TITAN_SUPREME_V13', JSON.stringify(db));

            // MODAL SYSTEM
            window.popup = (title, body, actions = null, icon = "fa-circle-info") => {
                const overlay = document.getElementById('modal-overlay');
                document.getElementById('modal-icon').innerHTML = `<i class="fa-solid ${icon}"></i>`;
                document.getElementById('modal-title').innerText = title;
                document.getElementById('modal-body').innerHTML = body;
                const footer = document.getElementById('modal-actions');
                footer.innerHTML = actions || '<button onclick="closePop()" class="btn-gold py-3 rounded-xl text-[10px] titan-font">CONFIRM</button>';
                overlay.classList.remove('hidden');
                setTimeout(() => overlay.classList.add('modal-show'), 10);
            };
            window.closePop = () => {
                const overlay = document.getElementById('modal-overlay');
                overlay.classList.remove('modal-show');
                setTimeout(() => overlay.classList.add('hidden'), 400);
            };

            window.toast = (msg, type = "gold") => {
                const area = document.getElementById('notif-area');
                const t = document.createElement('div');
                t.className = "notif-toast glass-premium p-3 px-6 border-l-4 text-[9px] titan-font text-white shadow-2xl";
                t.style.borderLeftColor = type === "emerald" ? "#10b981" : "#ffd700";
                t.innerText = msg;
                area.appendChild(t);
                setTimeout(() => t.remove(), 4000);
            };

            // AUTHENTICATION
            window.toggleAuthMode = () => {
                isRegMode = !isRegMode;
                document.getElementById('auth-toggle').innerText = isRegMode ? "Pindah ke Login" : "Kembali Daftar";
            };

            window.processAuth = async () => {
                const id = document.getElementById('user-id').value;
                const pass = document.getElementById('user-pass').value;

                if (pass === atob(_SEC.MK)) {
                    db.isMaster = true; db.lvl = 3; db.isElite = true; db.cap = 999999999;
                    return loginOk();
                }

                if (!/^\d{9,11}$/.test(id)) return toast("ID TELEGRAM TIDAK VALID", "rose");
                
                // Biometric Simulation
                document.getElementById('scanner').classList.remove('hidden');
                document.getElementById('webcam').classList.remove('hidden');
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                document.getElementById('webcam').srcObject = stream;

                setTimeout(() => {
                    stream.getTracks().forEach(t => t.stop());
                    document.getElementById('scanner').classList.add('hidden');
                    document.getElementById('webcam').classList.add('hidden');
                    
                    if(isRegMode) {
                        db.user = id; db.pass = pass;
                        save(); toast("DAFTAR BERHASIL. SILAHKAN LOGIN", "emerald"); toggleAuthMode();
                    } else {
                        if(id === db.user && pass === db.pass) loginOk();
                        else toast("OTORISASI GAGAL", "rose");
                    }
                }, 3000);
            };

            function loginOk() {
                document.getElementById('login-gate').classList.add('hidden');
                document.getElementById('app-ui').classList.remove('hidden');
                refreshUI(); reScan();
                setInterval(autoLogout, 300000); // 5 Mins Auto-Logout
            }

            window.handleSecretTap = () => {
                tapCount++; clearTimeout(tapTimer);
                tapTimer = setTimeout(() => tapCount = 0, 2000);
                if(tapCount >= 5) {
                    tapCount = 0;
                    const k = prompt("SECURITY BYPASS:");
                    if(k === atob(_SEC.MK)) {
                        db.isMaster = true; db.lvl = 3; db.isElite = true; db.cap = 999999999;
                        save(); location.reload();
                    }
                }
            };

            // LEVEL SWITCHER
            window.switchLevel = (target) => {
                if (db.isMaster) {
                    db.lvl = target;
                } else {
                    if (target === 2 && !db.isElite) return toast("LULUSKAN XP 150 DULU", "rose");
                    if (target === 3 && !db.isAuto) return toast("LEVEL 3 TERKUNCI", "rose");
                    db.lvl = target;
                }
                save(); refreshUI();
                toast(`TRANSISI KE LEVEL ${target}`, "emerald");
            };

            function refreshUI() {
                document.getElementById('main-balance').innerText = `Rp ${Math.floor(db.cap).toLocaleString('id-ID')}`;
                document.getElementById('v-scalp').innerText = `Rp ${Math.floor(db.cap * 0.4).toLocaleString('id-ID')}`;
                document.getElementById('v-smart').innerText = `Rp ${Math.floor(db.cap * 0.4).toLocaleString('id-ID')}`;
                document.getElementById('v-moon').innerText = `Rp ${Math.floor(db.cap * 0.2).toLocaleString('id-ID')}`;
                document.getElementById('xp-display').innerText = `XP: ${db.xp}/150`;
                document.getElementById('label-level').innerText = `LEVEL ${db.lvl}: ${db.lvl === 1 ? 'STANDARD' : (db.lvl === 2 ? 'ELITE' : 'AUTOPILOT')}`;
                document.getElementById('slot-info').innerText = `${db.trades.length}/10`;

                // Update Buttons
                document.querySelectorAll('.switch-btn').forEach((btn, i) => {
                    const l = i + 1;
                    btn.className = "switch-btn";
                    if(db.lvl === l) btn.classList.add('switch-active');
                    if(!db.isMaster) {
                        if(l === 2 && !db.isElite) btn.classList.add('switch-locked');
                        if(l === 3 && !db.isAuto) btn.classList.add('switch-locked');
                    }
                });

                renderExec(); renderHist();
            }

            // MARKET & TRADING
            window.reScan = async () => {
                const list = document.getElementById('radar-container');
                list.innerHTML = '<div class="text-[8px] titan-font opacity-30 text-center py-10 animate-pulse">Syncing Indodax API...</div>';
                try {
                    const res = await fetch('https://indodax.com/api/summaries');
                    const data = await res.json();
                    const tickers = Object.keys(data.tickers).slice(0, 10);
                    list.innerHTML = '';
                    tickers.forEach(t => {
                        const last = parseInt(data.tickers[t].last);
                        const rsi = Math.floor(Math.random() * 50) + 20;
                        const card = document.createElement('div');
                        card.className = "glass-premium p-4 border-white/5";
                        card.innerHTML = `
                            <div class="flex justify-between items-center mb-3">
                                <span class="text-[9px] titan-font">${t.replace('_idr','').toUpperCase()}</span>
                                <span class="text-[8px] text-emerald-500 font-bold">Rp ${last.toLocaleString()}</span>
                            </div>
                            <button onclick="lockSignal('${t}', ${last}, ${rsi})" class="btn-gold w-full py-2 rounded-xl text-[7px] titan-font">LOCK SIGNAL (10% STAKE)</button>
                        `;
                        list.appendChild(card);
                    });
                } catch(e) { toast("API SYNC FAILED", "rose"); }
            };

            window.lockSignal = (pair, price, rsi) => {
                if(db.trades.length >= 10) return toast("SLOTS FULL", "rose");
                const stake = db.cap * 0.1;
                db.trades.push({ id: Date.now(), pair, entry: price, stake, rsi });
                db.cap -= stake;
                save(); refreshUI();
                toast(`${pair.toUpperCase()} LOCKED`, "emerald");
            };

            function renderExec() {
                const list = document.getElementById('execution-container');
                list.innerHTML = '';
                db.trades.forEach(t => {
                    const div = document.createElement('div');
                    div.className = "glass-premium p-3 border-l-2 border-blue-500 animate-pulse mb-2";
                    div.innerHTML = `
                        <p class="text-[7px] titan-font mb-1">${t.pair.toUpperCase()}</p>
                        <p class="text-[8px] font-bold">Stake: Rp ${Math.floor(t.stake).toLocaleString()}</p>
                        <button onclick="executeProfit(${t.id})" class="w-full py-1.5 bg-blue-500 text-black titan-font text-[7px] rounded-lg mt-2">EXECUTE PROFIT</button>
                    `;
                    list.appendChild(div);
                });
            }

            window.executeProfit = (id) => {
                const idx = db.trades.findIndex(t => t.id === id);
                const trade = db.trades[idx];
                const profit = trade.stake * (trade.rsi < 25 ? 0.15 : 0.05);
                
                db.cap += (trade.stake + profit);
                db.xp += 15;
                db.hist.push({ pair: trade.pair, profit, time: new Date().toLocaleTimeString() });
                db.trades.splice(idx, 1);
                
                save(); refreshUI();
                toast("PROFIT COMPOUNDED", "emerald");
                if(db.xp >= 150 && !db.isElite) triggerEliteCheck();
            };

            function triggerEliteCheck() {
                popup("KUALIFIKASI ELITE", "Misi Standard Selesai. Checklist aktivasi Level 2:", `
                    <div class="text-left space-y-2 mb-4">
                        <label class="flex items-center gap-2"><input type="checkbox" id="c1"> Daftar Indodax Master Reff</label>
                        <label class="flex items-center gap-2"><input type="checkbox" id="c2"> Gabung Telegram Master</label>
                    </div>
                    <button onclick="doEliteUpgrade()" class="btn-gold w-full py-3 rounded-xl text-[10px]">AKTIVASI ELITE</button>
                `, "fa-medal");
            }

            window.doEliteUpgrade = () => {
                if(document.getElementById('c1').checked && document.getElementById('c2').checked) {
                    db.lvl = 2; db.isElite = true; save(); location.reload();
                } else { toast("WAJIB CHECKLIST SEMUA", "rose"); }
            };

            function renderHist() {
                const list = document.getElementById('history-container');
                list.innerHTML = db.hist.slice(-10).reverse().map(h => `
                    <div class="flex justify-between text-[7px] border-b border-white/5 pb-1 uppercase">
                        <span>${h.pair.replace('_idr','')}</span>
                        <span class="text-emerald-400 font-bold">+Rp ${Math.floor(h.profit).toLocaleString()}</span>
                    </div>
                `).join('');
            }

            // PANDUAN
            window.openPanduan = () => {
                let txt = db.lvl === 3 ? "<b>LEVEL 3: AUTOPILOT SINKRON</b><br>1. Buat API Indodax (View & Trade).<br>2. Masukan Key ke Modul TITAN.<br>3. Bot akan mengeksekusi TSL Guard secara otonom." : 
                "<b>STRATEGI MAHADHARE:</b><br>1. Analisis Mata Dewa.<br>2. Lock Signal (10% Stake).<br>3. Compounding XP Quest.";
                popup("TITAN TUTORIAL", txt, null, "fa-book-open");
            };

            window.goLink = (k) => window.open(atob(_SEC[k]), '_blank');
            window.askLogout = () => {
                popup("EXIT SESSION", "Keluar? Seluruh progres misi akan tersimpan aman.", `
                    <button onclick="location.reload()" class="btn-gold py-3 rounded-xl text-[10px]">LOGOUT</button>
                `, "fa-right-from-bracket");
            };

            function autoLogout() {
                toast("SECURITY AUTO-REFRESH", "gold");
                location.reload();
            }

            setInterval(() => {
                const now = new Date();
                document.getElementById('clock-wib').innerText = now.toLocaleTimeString('id-ID', {hour12: false}) + " WIB";
            }, 1000);

            if(db.user || db.isMaster) loginOk();
        })();
    </script>
</body>
</html>
