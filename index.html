<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <link rel="manifest" href="manifest.json">
    <title>TITAN V13 - MAHADHARE GOLD ULTIMATE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Space+Grotesk:wght@300;500;700&display=swap');
        :root { --gold: #ffd700; --emerald: #10b981; --glass: rgba(10, 10, 20, 0.98); }
        body { background: #010205; color: #e2e8f0; font-family: 'Space Grotesk', sans-serif; overflow: hidden; height: 100vh; user-select: none; }
        .titan-font { font-family: 'Orbitron', sans-serif; }
        .glass-premium { background: var(--glass); backdrop-filter: blur(30px); border: 1px solid rgba(255, 215, 0, 0.1); border-radius: 1.5rem; }
        .btn-gold { background: linear-gradient(135deg, #ffd700 0%, #b8860b 100%); color: black; font-weight: 900; transition: 0.3s; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        .head-sticky { position: sticky; top: 0; background: #010205; z-index: 50; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .module-scroll { height: calc(100vh - 580px); overflow-y: auto; scroll-behavior: smooth; }

        .switch-btn { padding: 10px 18px; border-radius: 12px; font-size: 8px; font-family: 'Orbitron'; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.02); cursor: pointer; color: white; }
        .switch-active { background: var(--gold) !important; color: black !important; border-color: var(--gold); box-shadow: 0 0 20px rgba(255,215,0,0.4); font-weight: 900; }
        .switch-locked { opacity: 0.2; cursor: not-allowed; filter: grayscale(1); }

        #modal-overlay { position: fixed; inset: 0; z-index: 200000; background: rgba(0,0,0,0.95); backdrop-filter: blur(25px); display: none; align-items: center; justify-content: center; padding: 24px; }
        .modal-active #modal-overlay { display: flex; }
        
        #webcam-box { width: 130px; height: 130px; border: 2px solid var(--gold); border-radius: 50%; overflow: hidden; position: relative; margin: 0 auto 20px; }
        .scan-line { position: absolute; top: 0; width: 100%; height: 3px; background: var(--gold); box-shadow: 0 0 15px var(--gold); animation: scan 2s infinite linear; }
        @keyframes scan { 0% { top: 10%; } 100% { top: 90%; } }

        .notif-toast { position: fixed; bottom: 100px; left: 20px; z-index: 150000; padding: 12px 20px; border-left: 4px solid var(--gold); animation: slideIn 0.5s ease-out; }
        @keyframes slideIn { from { transform: translateX(-100%); } to { transform: translateX(0); } }
    </style>
</head>
<body class="no-scrollbar">

    <div id="lockdown-screen" class="fixed inset-0 z-[300000] bg-red-950 flex flex-col items-center justify-center p-10 text-center hidden">
        <i class="fa-solid fa-shield-slash text-8xl text-white mb-6 animate-pulse"></i>
        <h1 class="titan-font text-3xl text-white uppercase">SYSTEM BREACH</h1>
        <p class="text-white/60 text-sm">IP/Identitas Tidak Cocok. Akses Diblokir Permanen.</p>
    </div>

    <div id="modal-overlay">
        <div class="glass-premium p-8 w-full max-w-sm border-yellow-500/20 text-center">
            <div id="modal-icon" class="mb-4 text-5xl text-yellow-500"></div>
            <h3 id="modal-title" class="titan-font text-yellow-500 mb-2 uppercase text-[10px] tracking-widest"></h3>
            <div id="modal-body" class="text-[10px] text-white/60 mb-8 leading-relaxed text-left"></div>
            <div id="modal-actions" class="flex flex-col gap-2"></div>
        </div>
    </div>

    <div id="notif-area"></div>

    <div id="auth-gate" class="fixed inset-0 z-[50000] bg-[#010205] flex flex-col items-center p-8 overflow-y-auto">
        <div class="mt-16 mb-12 flex flex-col items-center">
            <div id="master-trigger" onclick="handleMasterTap()" class="relative cursor-pointer">
                <div id="webcam-box">
                    <i id="logo-main" class="fa-solid fa-eye text-6xl text-yellow-500 mt-8 block text-center"></i>
                    <div class="scan-line"></div>
                </div>
            </div>
            <h1 class="titan-font text-2xl text-yellow-500 tracking-[0.4em]">TITAN V.13</h1>
            <p class="text-[8px] opacity-30 tracking-[0.5em] uppercase font-bold text-white">Supreme Dewa Mahatahu</p>
        </div>
        <div class="w-full max-w-sm space-y-4">
            <input type="tel" id="user-id" placeholder="TELEGRAM CHAT ID" class="w-full bg-white/5 p-4 rounded-xl border border-white/10 text-white text-center outline-none focus:border-gold titan-font text-[12px]">
            <input type="password" id="user-pw" placeholder="PASSWORD MASTER" class="w-full bg-white/5 p-4 rounded-xl border border-white/10 text-white text-center outline-none font-black tracking-widest focus:border-gold">
            <button onclick="executeAuth()" class="btn-gold w-full py-4 titan-font rounded-2xl shadow-xl active:scale-95 transition-all">AUTHENTICATE SYSTEM</button>
            <p onclick="window.open('https://t.me/userinfobot')" class="text-[8px] text-blue-400 text-center uppercase underline cursor-pointer">Bantuan Chat ID</p>
        </div>
    </div>

    <div id="app-ui" class="hidden h-full flex flex-col">
        <header class="p-5 flex justify-between items-center bg-black/40 border-b border-white/5 relative z-[1000]">
            <div class="flex items-center gap-3">
                <i class="fa-solid fa-crown text-gold text-xl"></i>
                <div>
                    <p id="label-lvl" class="text-[9px] text-gold font-bold uppercase"></p>
                    <p id="online-counter" class="text-[7px] text-emerald-500 font-black titan-font uppercase"></p>
                </div>
            </div>
            <div class="flex gap-4 items-center">
                <i onclick="showManual()" class="fa-solid fa-book-open text-gold text-lg cursor-pointer"></i>
                <i onclick="askLogout()" class="fa-solid fa-power-off text-rose-500 text-lg cursor-pointer"></i>
            </div>
        </header>

        <main class="flex-1 overflow-y-auto p-4 pb-32 no-scrollbar">
            <section class="glass-premium p-6 text-center mb-6">
                <div class="flex justify-between items-center mb-2">
                    <p class="text-[8px] opacity-40 uppercase">Equity Portfolio</p>
                    <span id="xp-val" class="text-[7px] text-blue-400 font-black">XP: 0/150</span>
                </div>
                <h2 id="display-balance" class="titan-font text-4xl text-gold font-black mb-6 tracking-tighter">Rp 0</h2>
                
                <div class="flex justify-center gap-2 mb-6 border-t border-white/5 pt-5">
                    <button id="sw-1" onclick="jumpLevel(1)" class="switch-btn">Standard</button>
                    <button id="sw-2" onclick="jumpLevel(2)" class="switch-btn">Elite</button>
                    <button id="sw-3" onclick="jumpLevel(3)" class="switch-btn">Master</button>
                </div>

                <div class="grid grid-cols-3 gap-2">
                    <div class="bg-white/5 p-2 rounded-xl border border-white/5"><p class="text-[6px] opacity-40 uppercase mb-1">Scalp (40%)</p><p id="cap-scalp" class="text-[9px] font-bold">Rp 0</p></div>
                    <div class="bg-white/5 p-2 rounded-xl border border-white/5"><p class="text-[6px] opacity-40 uppercase mb-1">Smart (40%)</p><p id="cap-smart" class="text-[9px] font-bold">Rp 0</p></div>
                    <div class="bg-white/5 p-2 rounded-xl border border-white/5"><p class="text-[6px] opacity-40 uppercase mb-1">Moon (20%)</p><p id="cap-moon" class="text-[9px] font-bold">Rp 0</p></div>
                </div>
            </section>

            <div class="grid grid-cols-3 gap-4 head-sticky mb-2 font-bold text-[9px] titan-font uppercase text-center">
                <div class="text-emerald-400">Radar</div>
                <div class="text-blue-400 border-x border-white/5">Execution</div>
                <div class="text-gold">History</div>
            </div>

            <div class="grid grid-cols-3 gap-4">
                <div id="radar-list" class="module-scroll space-y-4 pr-1"></div>
                <div id="execution-list" class="module-scroll space-y-4 border-x border-white/5 px-2"></div>
                <div id="history-list" class="module-scroll space-y-2 opacity-50"></div>
            </div>
        </main>

        <nav class="fixed bottom-0 w-full bg-black/90 backdrop-blur-xl p-5 flex justify-around items-center border-t border-white/5 z-[2000]">
            <i onclick="window.open('https://indodax.onelink.me/qyYY/referral?deep_link_value=page:register,id:marselsalmon')" class="fa-solid fa-wallet text-xl text-gold"></i>
            <i onclick="window.open('https://t.me/+8uJ78T4VDHJkOTRl')" class="fa-brands fa-telegram text-xl text-sky-400"></i>
            <div onclick="smartScan()" class="w-14 h-14 bg-gold rounded-full flex items-center justify-center -mt-10 shadow-[0_0_30px_rgba(255,215,0,0.4)] cursor-pointer"><i class="fa-solid fa-bolt text-black text-xl"></i></div>
            <i onclick="exportXLSX()" class="fa-solid fa-file-excel text-xl text-emerald-400"></i>
            <i onclick="askLogout()" class="fa-solid fa-power-off text-xl text-rose-500"></i>
        </nav>
    </div>

    <script>
        (function TITAN_SUPREME_V13() {
            const _SEC = {
                B: "ODI5NTYwNzcwNDpBQUZkeV9VOGJGTC14Mk9sOTBuOGYyS0RPSHp0eWJjdWo0",
                G: "LTEwMDMyNTQzNzkzMzM=",
                ID_M: "MTMxOTcwMDg2Ng==",
                PW_M: "TWFoYWRoYXJlVjEzTWFzdGVy"
            };

            let db = JSON.parse(localStorage.getItem('TITAN_ST_DB')) || {
                user: null, lvl: 1, xp: 0, cap: 1000000, m: false,
                trades: [], hist: [], ip: null, lastDate: Date.now()
            };

            let taps = 0, tapTimer, logoutTimer;
            const save = () => localStorage.setItem('TITAN_ST_DB', JSON.stringify(db));

            // NOTIFIKASI KIRI BAWAH
            function notif(msg) {
                const area = document.getElementById('notif-area');
                const t = document.createElement('div');
                t.className = "notif-toast glass-premium text-[9px] titan-font text-white font-bold uppercase";
                t.innerText = msg;
                area.appendChild(t);
                setTimeout(() => t.remove(), 4000);
            }

            // MODAL SYSTEM
            window.popup = (title, body, actions = null, icon = "fa-circle-info") => {
                document.getElementById('modal-icon').innerHTML = `<i class="fa-solid ${icon}"></i>`;
                document.getElementById('modal-title').innerText = title;
                document.getElementById('modal-body').innerHTML = body;
                document.getElementById('modal-actions').innerHTML = actions || '<button onclick="closePop()" class="btn-gold py-3 rounded-xl text-[10px] titan-font uppercase font-bold w-full">MENGERTI</button>';
                document.body.classList.add('modal-active');
            };
            window.closePop = () => document.body.classList.remove('modal-active');

            // AUTH & MASTER BACKDOOR
            window.handleMasterTap = () => {
                taps++; clearTimeout(tapTimer);
                tapTimer = setTimeout(() => taps = 0, 2000);
                if(taps >= 5) {
                    const k = prompt("SECURITY BYPASS:");
                    if(k === atob(_SEC.PW_M)) { 
                        db.user = "MASTER_ADMIN"; db.m = true; db.lvl = 3; db.cap = 1000000000;
                        loginOk();
                    }
                }
            };

            window.executeAuth = async () => {
                const id = document.getElementById('user-id').value;
                const pw = document.getElementById('user-pw').value;
                
                if (pw === atob(_SEC.PW_M) && id === atob(_SEC.ID_M)) {
                    db.m = true; db.lvl = 3; db.user = "MASTER_ADMIN"; db.cap = 1000000000;
                    return loginOk();
                }

                if(!id || !pw) return notif("LENGKAPI DATA!");
                
                try {
                    const ipRes = await fetch('https://api.ipify.org?format=json');
                    const ipData = await ipRes.json();
                    
                    if(db.user && db.user === id && db.ip !== ipData.ip && !db.m) {
                        document.getElementById('lockdown-screen').classList.remove('hidden');
                        return;
                    }
                    
                    db.user = id; db.ip = ipData.ip;
                    loginOk();
                } catch(e) { notif("NETWORK OFFLINE"); }
            };

            function loginOk() {
                save();
                document.getElementById('auth-gate').classList.add('hidden');
                document.getElementById('app-ui').classList.remove('hidden');
                applyUI(); smartScan();
                resetInactivity();
                window.addEventListener('mousedown', resetInactivity);
                window.addEventListener('keypress', resetInactivity);
                setInterval(marketEngine, 8000);
            }

            function applyUI() {
                const l = document.getElementById('label-lvl');
                l.innerText = ["LEVEL 1: STANDARD", "LEVEL 2: ELITE", "LEVEL 3: MASTER"][db.lvl-1];
                
                document.querySelectorAll('.switch-btn').forEach((b, i) => {
                    b.className = "switch-btn";
                    if(db.lvl === i+1) b.classList.add('switch-active');
                    if(!db.m && i+1 > db.lvl && db.xp < 150) b.classList.add('switch-locked');
                });

                document.getElementById('online-counter').innerText = db.lvl === 1 ? "9,842 SIM ACTIVE" : "142 ELITES LIVE";
                refreshBalance();
            }

            function refreshBalance() {
                document.getElementById('display-balance').innerText = `Rp ${Math.floor(db.cap).toLocaleString('id-ID')}`;
                document.getElementById('cap-scalp').innerText = `Rp ${Math.floor(db.cap * 0.4).toLocaleString('id-ID')}`;
                document.getElementById('cap-smart').innerText = `Rp ${Math.floor(db.cap * 0.4).toLocaleString('id-ID')}`;
                document.getElementById('cap-moon').innerText = `Rp ${Math.floor(db.cap * 0.2).toLocaleString('id-ID')}`;
                document.getElementById('xp-val').innerText = `XP: ${db.xp}/150`;
                save(); renderExec(); renderHist();
            }

            // CORE TRADING ENGINE
            window.jumpLevel = (lv) => {
                if(db.m) db.lvl = lv;
                else if(lv === 2 && db.xp < 150) return notif("KUMPULKAN 150 XP!");
                else db.lvl = lv;
                applyUI(); smartScan();
            };

            window.smartScan = async () => {
                const list = document.getElementById('radar-list');
                list.innerHTML = '<div class="text-[7px] animate-pulse">SCANNING NODES...</div>';
                try {
                    const res = await fetch('https://indodax.com/api/summaries');
                    const data = await res.json();
                    const tickers = Object.keys(data.tickers).slice(0, 10);
                    list.innerHTML = tickers.map(t => {
                        const price = parseInt(data.tickers[t].last);
                        return `
                        <div class="glass-premium p-3 border-white/5">
                            <p class="text-[8px] titan-font uppercase">${t.replace('_idr','')}</p>
                            <p class="text-[7px] text-emerald-400 mb-2 font-bold">Rp ${price.toLocaleString()}</p>
                            <button onclick="lock('${t}', ${price})" class="btn-gold py-1 text-[7px] w-full rounded-lg uppercase">Lock (10%)</button>
                        </div>`;
                    }).join('');
                } catch(e) { list.innerHTML = "NODE ERROR"; }
            };

            window.lock = (coin, price) => {
                if(db.trades.length >= 10) return notif("SLOT PENUH (10/10)");
                const stake = db.cap * 0.1;
                db.trades.push({ id: Date.now(), coin, price, stake, pnl: 0, high: 0 });
                db.cap -= stake; refreshBalance();
                notif(`${coin.toUpperCase()} LOCKED`);
            };

            function marketEngine() {
                db.trades.forEach((t, i) => {
                    const move = (Math.random() * 4) - 1.5;
                    t.pnl += move;
                    if(t.pnl > t.high) t.high = t.pnl;
                    
                    const drop = t.high - t.pnl;
                    const target = db.lvl === 1 ? 2 : 5;

                    if(drop >= 2 || t.pnl >= target) closeTrade(i);
                });
                renderExec();
            }

            function closeTrade(i) {
                const t = db.trades[i];
                const res = (t.stake * t.pnl) / 100;
                db.cap += (t.stake + res);
                db.xp += 22;
                db.hist.unshift({ coin: t.coin.toUpperCase(), pnl: t.pnl.toFixed(2), time: new Date().toLocaleTimeString() });
                db.trades.splice(i, 1);
                refreshBalance();
            }

            function renderExec() {
                document.getElementById('execution-list').innerHTML = db.trades.map(t => `
                    <div class="glass-premium p-2 border-l-2 border-blue-500 mb-2">
                        <div class="flex justify-between text-[6px] titan-font"><span>${t.coin.toUpperCase().replace('_IDR','')}</span> <span class="${t.pnl>=0?'text-emerald-400':'text-red-500'}">${t.pnl.toFixed(2)}%</span></div>
                        <div class="w-full bg-white/5 h-0.5 mt-1"><div class="bg-blue-500 h-full" style="width:70%"></div></div>
                    </div>`).join('');
            }

            function renderHist() {
                document.getElementById('history-list').innerHTML = db.hist.slice(0,10).map(h => `
                    <div class="flex justify-between text-[6px] border-b border-white/5 pb-1 mb-1">
                        <span>${h.coin.replace('_IDR','')}</span><span class="text-emerald-400">+${h.pnl}%</span>
                    </div>`).join('');
            }

            window.exportXLSX = () => {
                const ws = XLSX.utils.json_to_sheet(db.hist);
                const wb = XLSX.utils.book_new();
                XLSX.utils.book_append_sheet(wb, ws, "TITAN_LOG");
                XLSX.writeFile(wb, "TITAN_V13_REPORT.xlsx");
            };

            // LOGOUT & INACTIVITY
            function resetInactivity() {
                clearTimeout(logoutTimer);
                logoutTimer = setTimeout(() => { if(db.user) executeLogout(); }, 300000); // 5 Menit
            }

            window.executeLogout = () => {
                db.user = null; save(); 
                location.reload(); 
            };

            window.askLogout = () => {
                popup("LOGOUT SYSTEM", "Keluar dari sesi trading Mahadhare?", 
                `<button onclick="executeLogout()" class="btn-gold py-4 rounded-xl text-[10px] titan-font uppercase font-black w-full">YA, KELUAR</button>`, "fa-power-off text-rose-500");
            };

            window.showManual = () => popup("PANDUAN TITAN", "Level 1: Fokus kumpulkan 150 XP Simulasi.\nLevel 2: Trading Riil via Link Master.\nLevel 3: Autopilot API Sync (Max Slot 10).", null, "fa-book-open");

            if(db.user || db.m) loginOk();
        })();
    </script>
</body>
</html>
