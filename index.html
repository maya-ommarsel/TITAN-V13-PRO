<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>TITAN V13 - MAHADHARE GOLD ULTIMATE</title>
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;500;800&display=swap');
        :root { --gold: #ffd700; --emerald: #10b981; --glass: rgba(255, 255, 255, 0.03); --bg: #010205; }
        body { background: var(--bg); color: #e2e8f0; font-family: 'Inter', sans-serif; overflow: hidden; height: 100vh; user-select: none; }
        .titan-font { font-family: 'Orbitron', sans-serif; }
        .glass-premium { background: var(--glass); backdrop-filter: blur(30px); border: 1px solid rgba(255, 215, 0, 0.1); border-radius: 1.5rem; }
        .btn-gold { background: linear-gradient(135deg, #ffd700 0%, #b8860b 100%); color: black; font-weight: 900; transition: 0.3s; }
        
        /* Layout Grid */
        .head-sticky { position: sticky; top: 0; background: var(--bg); z-index: 50; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .module-scroll { height: calc(100vh - 610px); overflow-y: auto; scroll-behavior: smooth; }
        .module-scroll::-webkit-scrollbar { width: 2px; }
        .module-scroll::-webkit-scrollbar-thumb { background: var(--gold); }

        /* Navigation */
        .lv-btn { padding: 8px 14px; border-radius: 12px; font-size: 8px; font-family: 'Orbitron'; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.02); color: white; }
        .lv-active { background: var(--gold) !important; color: black !important; font-weight: 900; box-shadow: 0 0 15px rgba(255,215,0,0.3); }

        /* Floating Msg */
        #floating-msg { position: fixed; left: 20px; bottom: 100px; z-index: 90000; background: rgba(0,0,0,0.9); padding: 12px; border-left: 4px solid var(--gold); font-size: 10px; color: var(--gold); border-radius: 0 8px 8px 0; pointer-events: none; transition: 0.5s; opacity: 0; }
        
        /* Modal Paten */
        #modal-overlay { position: fixed; inset: 0; z-index: 200000; background: rgba(0,0,0,0.95); backdrop-filter: blur(20px); display: none; align-items: center; justify-content: center; padding: 24px; }
        .modal-active #modal-overlay { display: flex; }
        
        @keyframes scanLine { 0% { top: 0; } 100% { top: 100%; } }
    </style>
</head>
<body class="no-scrollbar">

<div id="lockdown-screen" class="fixed inset-0 z-[300000] bg-red-950 flex flex-col items-center justify-center p-10 text-center hidden">
    <i class="fa-solid fa-shield-slash text-8xl text-white mb-6 animate-pulse"></i>
    <h1 class="titan-font text-3xl text-white">SYSTEM BREACH</h1>
    <p class="text-white/60 text-sm">IP dan Perangkat Anda telah diblokir permanen oleh Mata Dewa.</p>
</div>

<div id="auth-screen" class="fixed inset-0 z-[50000] bg-[#010205] flex flex-col items-center p-8 overflow-y-auto">
    <div class="mt-12 mb-10 text-center">
        <div class="w-32 h-32 glass-premium border-yellow-500/30 flex items-center justify-center relative overflow-hidden mb-4 mx-auto">
            <i class="fa-solid fa-eye text-6xl text-yellow-500 drop-shadow-[0_0_20px_#ffd700]"></i>
        </div>
        <h1 class="titan-font text-2xl text-yellow-500 tracking-[0.4em]">TITAN V.13</h1>
        <p class="text-[8px] opacity-40 uppercase font-black">Supreme Dewa Mahatahu</p>
    </div>

    <div class="w-full max-w-sm space-y-4" id="auth-form">
        <input type="text" id="user-phone" placeholder="Nomor Telegram (62...)" class="w-full bg-white/5 p-4 rounded-xl border border-white/10 text-white text-center outline-none focus:border-gold titan-font text-sm">
        <input type="password" id="user-pass" placeholder="Password Master" class="w-full bg-white/5 p-4 rounded-xl border border-white/10 text-white text-center outline-none font-black tracking-widest focus:border-gold">
        <button onclick="processAuth()" class="btn-gold w-full py-4 titan-font rounded-2xl shadow-xl active:scale-95 transition-all">VALIDASI IDENTITAS</button>
        <div class="flex justify-between items-center px-2">
            <button onclick="window.open('https://t.me/userinfobot')" class="text-[9px] text-blue-400 font-bold uppercase">Chat ID Bot</button>
            <span id="auth-toggle" onclick="toggleAuthMode()" class="text-[9px] text-white/30 uppercase cursor-pointer">Mode: Login</span>
        </div>
    </div>

    <div id="biometric-loader" class="hidden text-center mt-10">
        <div class="w-24 h-24 border-2 border-gold rounded-full mx-auto relative overflow-hidden mb-4">
            <div class="absolute w-full h-1 bg-gold shadow-[0_0_10px_gold] animate-[scanLine_2s_infinite]"></div>
        </div>
        <p id="bio-text" class="text-gold titan-font text-[10px] animate-pulse">MEMINDAI WAJAH & IP...</p>
    </div>
</div>

<div id="app-shell" class="hidden flex-col h-screen">
    <header class="p-5 flex justify-between items-center bg-black/40 border-b border-white/5 relative z-[120000]">
        <div onclick="masterSecretTap()" class="flex items-center gap-3 cursor-pointer">
            <span class="text-xl">üëÅÔ∏è</span>
            <div>
                <p id="user-badge" class="text-[9px] text-gold font-black uppercase tracking-widest">STANDARD</p>
                <div class="flex items-center gap-2">
                    <div class="w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"></div>
                    <p id="online-counter" class="text-[7px] text-emerald-500 font-black titan-font uppercase"></p>
                </div>
            </div>
        </div>

        <div class="level-nav flex gap-2 bg-black/60 p-1 rounded-full border border-gold/30">
            <button class="lv-btn lv-active" id="btn-lv1" onclick="jumpLevel(1)">L1</button>
            <button class="lv-btn" id="btn-lv2" onclick="jumpLevel(2)">L2</button>
            <button class="lv-btn" id="btn-lv3" onclick="jumpLevel(3)">L3</button>
        </div>
        
        <button onclick="initLogout()" class="text-rose-500 text-2xl active:scale-90 transition-all">‚èª</button>
    </header>

    <main class="flex-1 overflow-y-auto p-4 pb-32 no-scrollbar">
        <section class="mb-6 glass-premium p-4 border-blue-500/20">
            <h3 class="text-[8px] titan-font text-blue-400 mb-3 uppercase tracking-widest"><i class="fa-solid fa-ranking-star mr-2"></i>Global Level Board</h3>
            <div id="leader-list-head" class="grid grid-cols-3 gap-2"></div>
        </section>

        <div class="glass-premium p-6 text-center mb-6 border border-gold/30">
            <div class="text-[10px] opacity-60 titan-font">TOTAL EQUITY (AUTO-COMPOUND)</div>
            <h1 id="bal-val" class="titan-font text-gold text-4xl my-4 tracking-tighter">Rp 0</h1>
            <div class="flex justify-around text-[9px] titan-font uppercase font-bold">
                <div>SLOTS: <span id="slot-val" class="text-gold">0/10</span></div>
                <div>DAILY: <span id="prof-val" class="text-gold">0%</span></div>
                <div id="api-status" class="text-rose-500">API: OFF</div>
            </div>
        </div>

        <div id="api-panel" class="hidden mb-6 p-4 glass-premium border-emerald-500/40">
            <p class="text-[9px] text-emerald-400 titan-font mb-3 uppercase">Master API Node Sync</p>
            <input type="password" id="ak" placeholder="API Key Indodax" class="w-full bg-black/40 p-3 rounded-xl border border-white/10 text-[9px] text-white mb-2 outline-none">
            <input type="password" id="as" placeholder="API Secret Key" class="w-full bg-black/40 p-3 rounded-xl border border-white/10 text-[9px] text-white mb-4 outline-none">
            <button onclick="saveAPI()" class="btn-gold w-full py-3 text-[9px] rounded-xl uppercase">Activate Global Node</button>
        </div>

        <div class="grid grid-cols-3 gap-4 head-sticky font-black text-[9px] titan-font uppercase text-center tracking-widest">
            <div class="text-emerald-400">Radar Dewa</div>
            <div class="text-blue-400 border-x border-white/5">Execution</div>
            <div class="text-gold">History</div>
        </div>

        <div class="grid grid-cols-3 gap-4">
            <div id="radar-list" class="module-scroll space-y-4 pr-1"></div>
            <div id="exec-list" class="module-scroll space-y-4 border-x border-white/5 px-2"></div>
            <div id="hist-list" class="module-scroll space-y-2 opacity-50"></div>
        </div>
    </main>

    <footer class="fixed bottom-0 w-full bg-black/95 backdrop-blur-2xl p-5 flex justify-around border-t border-white/5 z-[100]">
        <div onclick="showTutorial()" class="text-center cursor-pointer"><i class="fa-solid fa-book-open text-gold"></i><br><small class="text-[8px] font-bold">MANUAL</small></div>
        <div onclick="window.open('https://t.me/+8uJ78T4VDHJkOTRl')" class="text-center cursor-pointer"><i class="fa-solid fa-users text-sky-400"></i><br><small class="text-[8px] font-bold">GROUP</small></div>
        <div id="nav-wallet" onclick="handleWalletClick()" class="text-center cursor-pointer"><i class="fa-solid fa-wallet text-gold"></i><br><small class="text-[8px] font-bold">BANK</small></div>
        <div id="roadmap-box" class="text-center opacity-40"><small class="text-[7px] font-black">ROADMAP L3<br>30 DAYS LEFT</small></div>
    </footer>
</div>

<div id="floating-msg">Titan Engine Ready...</div>

<div id="modal-global" class="modal-overlay">
    <div class="modal-box glass-premium p-8 max-w-sm w-full border border-gold/30 text-center">
        <div id="modal-content"></div>
    </div>
</div>

<script>
/**
 * TITAN V13 SUPREME LOGIC - SINERGI PATEN
 */
const TITAN_CONFIG = {
    token: "8295607704:AAFdy_U8bFL-x2Ol90n8f2KDOHXztybcuj4",
    group: "-1003254379333",
    admin: "1319700866",
    pass: "MahadhareV13Master"
};

let db = JSON.parse(localStorage.getItem('titan_supreme_db')) || {
    user: null, level: 1, balance: 1000000, dailyProfit: 0, 
    slots: [], history: [], xp: 0, 
    isMaster: false, api_key: null, isBlocked: false, lastActive: Date.now()
};

let isRegMode = false;

// --- 1. AUTH & SECURITY PATEN (KODE ANDA) ---
function toggleAuthMode() {
    isRegMode = !isRegMode;
    document.getElementById('auth-toggle').innerText = isRegMode ? "Mode: Login" : "Mode: Daftar Akun";
}

function processAuth() {
    const ph = document.getElementById('user-phone').value;
    const ps = document.getElementById('user-pass').value;

    if (ph === TITAN_CONFIG.admin && ps === TITAN_CONFIG.pass) {
        db.user = "MASTER ADMIN"; db.level = 3; db.isMaster = true; db.balance = 1000000000;
        return loginOk();
    }

    if (ph.length >= 8 && ps.length >= 6) {
        document.getElementById('auth-form').classList.add('hidden');
        document.getElementById('biometric-loader').classList.remove('hidden');
        setTimeout(() => { document.getElementById('bio-text').innerText = "MENCOCOKKAN IP & LIVENESS..."; }, 1500);
        setTimeout(() => { db.user = ph; loginOk(); }, 4000);
    } else {
        showToast("Identitas Tidak Valid!", "danger");
    }
}

function loginOk() {
    saveDB();
    document.getElementById('auth-screen').style.display = 'none';
    document.getElementById('app-shell').style.display = 'flex';
    updateUI();
    setInterval(mataDewaEngine, 8000); // Penatapan Sinyal 8 Detik
    setInterval(updateLiveStats, 10000);
    setInterval(autoLogoutCheck, 60000);
    showToast("TITAN V13 ONLINE", "success");
}

function initLogout() {
    showModal(`
        <h3 class="titan-font text-gold mb-4 uppercase">Logout System</h3>
        <p class="text-[10px] text-white/60 mb-6">Keluar dari sesi trading Mahadhare? Sesi akan disimpan di memori lokal.</p>
        <button onclick="executeLogout()" class="bg-gold text-black w-full py-4 rounded-2xl font-black titan-font uppercase active:scale-95 transition-all">YA, KELUAR</button>
        <button onclick="closeModal()" class="w-full py-3 text-white/30 text-[9px] mt-2 uppercase font-bold">Batal</button>
    `);
}

function executeLogout() {
    db.user = null; saveDB();
    location.reload(); // Hard Reset ke Auth Gate
}

// --- 2. ENGINE LOGIC (MATA DEWA & TSL) ---
async function mataDewaEngine() {
    if(!db.user) return;
    const coins = ['BTC','ETH','SOL','PEPE','BNB','DOGE','SHIB','ADA','TRX','MATIC'];
    const container = document.getElementById('radar-list');
    container.innerHTML = '';

    coins.forEach(coin => {
        const rsi = Math.floor(Math.random() * 55) + 20;
        const pwr = Math.floor(Math.random() * 30) + 70;
        const moon = rsi < 25;
        const stake = db.balance * 0.1;

        // Auto-Compound Autopilot L3
        if(db.level === 3 && pwr >= 96 && db.slots.length < 10) executeTrade(coin, stake, "AUTO");

        listCard(coin, rsi, pwr, moon, stake, container);
    });
    processTSLGuard();
}

function listCard(coin, rsi, pwr, moon, stake, container) {
    container.innerHTML += `
        <div class="glass-premium p-3 border-white/5 mb-3 relative overflow-hidden">
            ${moon ? '<div class="absolute top-0 right-0 bg-purple-600 px-2 text-[5px] titan-font animate-pulse">MOONSHOT</div>' : ''}
            <div class="flex justify-between items-center mb-2"><b class="text-[10px] text-gold uppercase">${coin}/IDR</b></div>
            <div class="text-[8px] opacity-40 mb-3 font-bold">Pwr: ${pwr}% | RSI: ${rsi}</div>
            <button onclick="lockSignal('${coin}', ${stake})" class="btn-gold w-full py-1.5 text-[8px] rounded-lg">LOCK (10%)</button>
        </div>`;
}

function lockSignal(coin, stake) {
    if(db.slots.length >= 10) return showToast("SLOT PENUH", "danger");
    const limit = db.level === 1 ? 5 : (db.level === 2 ? 10 : 100);
    if(db.dailyProfit >= limit) return showToast(`TARGET ${limit}% TERCAPAI`, "danger");
    executeTrade(coin, stake, "MANUAL");
}

function executeTrade(coin, stake, mode) {
    db.slots.push({ id: Date.now(), coin, stake, profit: 0, high: 0, mode });
    db.balance -= stake;
    showToast(`${coin} LOCKED - TSL ACTIVE`, "success");
    if(db.level >= 2) sendTelegram(`üö® *${mode} BUY*\nAsset: ${coin}\nStake: Rp ${stake.toLocaleString()}`);
    updateUI();
}

function processTSLGuard() {
    db.slots.forEach((t, i) => {
        const move = (Math.random() * 6) - 2.5; // Volatilitas Simulasi
        t.profit += move;
        if(t.profit > t.high) t.high = t.profit;

        const drop = t.high - t.profit;
        const target = db.level === 1 ? 1.5 : (db.level === 2 ? 5 : 10);

        // SELEKSI ALAM LOGIC
        if(drop >= 2 || t.profit >= target) {
            const net = (t.stake * t.profit) / 100;
            db.balance += (t.stake + net);
            db.dailyProfit += t.profit;
            db.history.unshift({ coin: t.coin, res: t.profit.toFixed(2), time: new Date().toLocaleTimeString() });
            db.slots.splice(i, 1);
            db.xp += 25; 
            if(db.level >= 2) sendTelegram(`‚úÖ *PROFIT SECURED*\nAsset: ${t.coin}\nNet: +${t.profit.toFixed(2)}%`);
            updateUI();
        }
    });
}

// --- 3. JEMBATAN LEVEL & UI ---
function jumpLevel(target) {
    if(db.isMaster) { db.level = target; updateUI(); return; }
    if(target === 2 && db.xp < 150) return showModal("<h3 class='text-gold uppercase titan-font mb-2'>Akses Terkunci</h3><p class='text-[10px] opacity-60'>Lengkapi misi Seleksi Alam (150 XP) untuk membuka mode riil.</p>");
    if(target === 3 && db.level < 2) return showToast("Selesaikan Level 2!", "danger");
    
    if(target === 2 && db.level === 1) return showEliteActivation();
    if(target === 3) { document.getElementById('api-panel').classList.toggle('hidden'); return; }

    db.level = target;
    updateUI();
}

function showEliteActivation() {
    showModal(`
        <h3 class="titan-font text-gold mb-4 uppercase">Aktivasi Elite Riil</h3>
        <div class="text-left text-[10px] space-y-4 mb-6">
            <label class="flex items-center gap-2"><input type="checkbox" id="c1"> Daftar Indodax Link Master (Referral)</label>
            <label class="flex items-center gap-2"><input type="checkbox" id="c2"> Join Group Telegram Mahadhare</label>
            <label class="flex items-center gap-2"><input type="checkbox" id="c3"> Setujui TSL Guard Paten 2%</label>
        </div>
        <button onclick="validateElite()" class="btn-gold w-full py-4 rounded-2xl uppercase">Aktifkan Mode Riil</button>
    `);
}

function validateElite() {
    if(document.getElementById('c1').checked && document.getElementById('c2').checked) {
        db.level = 2; closeModal(); updateUI(); showToast("LEVEL UP: ELITE MODE", "success");
    }
}

function saveAPI() {
    if(document.getElementById('ak').value.length > 8) {
        db.api_key = document.getElementById('ak').value; db.level = 3;
        document.getElementById('api-panel').classList.add('hidden');
        updateUI(); showToast("AUTOPILOT SYNCED", "success");
    }
}

function updateLiveStats() {
    const counter = document.getElementById('online-counter');
    const head = document.getElementById('leader-list-head');
    const leaders = [`Admin (L3)`, `ID 109x (L3)`, `ID 882x (L2)`];
    
    if(db.level === 1) {
        counter.innerText = `${(Math.floor(Math.random()*400)+9400).toLocaleString()} Members Online`;
    } else {
        counter.innerText = `${(Math.floor(Math.random()*15)+130)} Elites Real Online`;
    }
    
    head.innerHTML = leaders.map((l, i) => `
        <div class="bg-white/5 p-2 rounded-xl text-center border border-white/5">
            <p class="text-[6px] opacity-40 uppercase mb-1 font-black">Rank ${i+1}</p>
            <p class="text-[7px] text-white font-black truncate">${l}</p>
        </div>`).join('');
}

function updateUI() {
    document.getElementById('bal-val').innerText = `Rp ${Math.floor(db.balance).toLocaleString('id-ID')}`;
    document.getElementById('slot-val').innerText = `${db.slots.length}/10`;
    document.getElementById('prof-val').innerText = `${db.dailyProfit.toFixed(1)}%`;
    document.getElementById('user-badge').innerText = ["STANDARD", "ELITE", "MASTER"][db.level-1];
    document.getElementById('api-status').innerText = db.level === 3 ? "API: SYNCED" : "API: OFF";
    document.getElementById('api-status').style.color = db.level === 3 ? "#00ff88" : "#ff3e3e";
    document.getElementById('cap-scalp').innerText = `Rp ${Math.floor(db.balance * 0.4).toLocaleString()}`;
    document.getElementById('cap-smart').innerText = `Rp ${Math.floor(db.balance * 0.4).toLocaleString()}`;
    document.getElementById('cap-moon').innerText = `Rp ${Math.floor(db.balance * 0.2).toLocaleString()}`;

    document.querySelectorAll('.lv-btn').forEach((btn, i) => btn.classList.toggle('lv-active', db.level === i+1));
    const wallet = document.getElementById('nav-wallet');
    if (db.level === 1 && !db.isMaster) wallet.classList.add('locked-wallet'); else wallet.classList.remove('locked-wallet');

    renderExecution(); renderHistory(); saveDB();
}

function renderExecution() {
    const cont = document.getElementById('exec-list');
    cont.innerHTML = db.slots.map(t => `
        <div class="glass-premium p-3 border-l-4 border-blue-500 mb-3 text-center">
            <p class="text-[9px] font-black text-white uppercase">${t.coin}</p>
            <b class="text-[10px] ${t.profit >= 0 ? 'text-emerald-400' : 'text-rose-500'}">${t.profit.toFixed(2)}%</b>
            <div class="text-[6px] opacity-40 mt-1 uppercase">TSL Guard Active</div>
        </div>`).join('');
}

function renderHistory() {
    document.getElementById('hist-list').innerHTML = db.history.slice(0, 12).map(h => `
        <div class="flex justify-between text-[8px] py-2 border-b border-white/5 font-bold uppercase">
            <span>${h.coin}</span><span class="${h.res >= 0 ? 'text-emerald-400' : 'text-rose-400'}">+${h.res}%</span>
        </div>`).join('');
}

// --- UTILS ---
function showToast(msg, type) {
    const f = document.getElementById('floating-msg');
    f.innerText = msg; f.style.opacity = 1;
    setTimeout(() => f.style.opacity = 0.5, 3000);
}
function showModal(html) { document.getElementById('modal-content').innerHTML = html; document.body.classList.add('modal-active'); }
function closeModal() { document.body.classList.remove('modal-active'); }
function openLink(k) { window.open(TITAN_CONFIG.links[k] || TITAN_CONFIG.links.indodax, '_blank'); }
function handleWalletClick() { if (db.level === 1 && !db.isMaster) return showToast("BANK TERKUNCI: CAPAI L2", "danger"); openLink('indodax'); }
function masterSecretTap() { db.taps++; if (db.taps >= 5) { const k = prompt("SECURITY BYPASS:"); if (k === TITAN_CONFIG.pass) { db.isMaster = true; db.level = 3; db.balance = 1000000000; updateUI(); } db.taps = 0; } }
async function sendTelegram(msg) { fetch(`https://api.telegram.org/bot${TITAN_CONFIG.token}/sendMessage?chat_id=${TITAN_CONFIG.group}&text=${encodeURIComponent(msg)}&parse_mode=Markdown`); }
function saveDB() { localStorage.setItem('titan_supreme_db', JSON.stringify(db)); }
function autoLogoutCheck() { if (Date.now() - db.lastActive > 300000 && db.user) executeLogout(); }
function showTutorial() { showModal(`<h3 class="titan-font text-gold mb-4">TITAN MANUAL</h3><p class="text-[10px] text-left leading-relaxed text-white/70">1. L1: Simulasi XP (Target 150).<br>2. L2: Real manual via Link Master.<br>3. L3: Autopilot API (Max Slot 10).<br>TSL Guard otomatis aktif di 2%.</p><button onclick="closeModal()" class="btn-gold w-full py-3 mt-4 rounded-xl">MENGERTI</button>`); }
</script>
</body>
</html>
