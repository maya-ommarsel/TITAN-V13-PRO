<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TITAN V.13 - OMNIPOTENT SYSTEM</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.05);
            --gold: #ffcc00;
            --emerald: #2ecc71;
            --rose: #e74c3c;
            --bg: #050505;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--bg); color: white; overflow: hidden; }

        /* Security Red Screen */
        #security-breach {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #ff0000; color: white; z-index: 99999; 
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; font-weight: bold;
        }

        /* Layout Main */
        #app { display: none; height: 100vh; flex-direction: column; }
        
        header { 
            padding: 15px; background: rgba(0,0,0,0.8); border-bottom: 1px solid var(--glass);
            display: flex; justify-content: space-between; align-items: center;
        }

        .status-node { font-size: 10px; color: var(--gold); letter-spacing: 1px; }

        /* Level Switcher */
        .level-nav {
            display: flex; justify-content: space-around; background: #111; padding: 10px;
        }
        .btn-lvl { 
            padding: 8px 20px; border-radius: 20px; border: 1px solid var(--glass);
            background: #222; color: #666; cursor: pointer; transition: 0.3s;
        }
        .btn-lvl.active { background: var(--gold); color: black; font-weight: bold; box-shadow: 0 0 15px var(--gold); }

        /* Dashboard Container */
        .dashboard { 
            display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; padding: 10px; height: calc(100vh - 180px);
        }

        .col { background: rgba(20,20,20,0.5); border-radius: 10px; padding: 10px; display: flex; flex-direction: column; overflow-y: auto; }
        .col-title { font-size: 12px; font-weight: bold; margin-bottom: 10px; display: flex; justify-content: space-between; }

        /* Cards */
        .card {
            background: var(--glass); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px; padding: 12px; margin-bottom: 8px; position: relative;
        }
        .glow-pulse { border: 1px solid var(--gold) !important; animation: pulse-gold 1.5s infinite; }
        @keyframes pulse-gold { 0% { box-shadow: 0 0 5px var(--gold); } 50% { box-shadow: 0 0 20px var(--gold); } 100% { box-shadow: 0 0 5px var(--gold); } }

        .strategy-label { font-size: 9px; padding: 2px 6px; border-radius: 4px; background: #444; margin-right: 5px; }
        .sparkline { width: 100%; height: 30px; margin: 8px 0; }
        
        /* Floating Profit Pulse */
        .profit-pulse { animation: pulse-profit 1s infinite; }
        @keyframes pulse-profit { 0% { transform: scale(1); } 50% { transform: scale(1.05); color: var(--emerald); } 100% { transform: scale(1); } }

        /* Blur Radar */
        .radar-locked { filter: blur(5px); pointer-events: none; }

        /* Modals Glassmorphism */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); backdrop-filter: blur(10px);
            z-index: 1000; display: none; align-items: center; justify-content: center;
        }
        .modal-content {
            background: rgba(30,30,30,0.9); padding: 30px; border-radius: 20px;
            width: 90%; max-width: 400px; border: 1px solid var(--glass); text-align: center;
        }

        /* Floating Toast */
        .toast {
            position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%);
            background: var(--gold); color: black; padding: 10px 20px; border-radius: 30px;
            font-weight: bold; display: none; z-index: 2000;
        }

        .book-active { opacity: 1 !important; color: var(--gold); text-shadow: 0 0 10px var(--gold); animation: pulse-book 2s infinite; }
        @keyframes pulse-book { 0%, 100% { opacity: 0.7; } 50% { opacity: 1; } }

        .config-locked { opacity: 0.3; filter: grayscale(1); }
        
        #face-scan-ui { 
            width: 200px; height: 200px; border: 2px solid var(--gold); border-radius: 50%;
            margin: 20px auto; position: relative; overflow: hidden;
        }
        .scan-line {
            position: absolute; width: 100%; height: 2px; background: var(--gold);
            top: 0; animation: scan 2s linear infinite;
        }
        @keyframes scan { from { top: 0; } to { top: 100%; } }

        .hidden-master-btn { 
            position: absolute; top: 0; left: 0; width: 40px; height: 40px; opacity: 0; z-index: 10001;
        }
    </style>
</head>
<body>

    <div id="security-breach" style="display:none;">
        <h1>SECURITY BREACH DETECTED</h1>
        <p>DEVICE BLACKLISTED PERMANENTLY</p>
        <p>REASON: ILLEGAL INSPECTION / VPN</p>
    </div>

    <div id="auth-screen" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh;">
        <div class="hidden-master-btn" onclick="lockMasterDevice()"></div>
        <i class="fas fa-microchip" id="master-chip" style="font-size: 50px; color: var(--gold); margin-bottom: 20px;" onclick="masterKnock()"></i>
        <h2 id="auth-title">TITAN V.13 LOGIN</h2>
        <div id="auth-form" style="width: 80%; max-width: 300px; margin-top: 20px;">
            <input type="text" id="tele-id" placeholder="Telegram ID" style="width: 100%; padding: 12px; margin-bottom: 10px; background: #222; border: 1px solid #444; color: white;">
            <input type="password" id="pass" placeholder="Password" style="width: 100%; padding: 12px; margin-bottom: 10px; background: #222; border: 1px solid #444; color: white;">
            <button onclick="handleAuth()" id="btn-auth-main" style="width: 100%; padding: 12px; background: var(--gold); border: none; font-weight: bold;">MASUK</button>
            <p onclick="toggleAuthMode()" style="margin-top: 15px; font-size: 12px; color: var(--gold); cursor: pointer;">Belum punya akun? Daftar</p>
        </div>
    </div>

    <div id="app">
        <header>
            <div>
                <div class="status-node" id="node-ticker">NODE: SYNCING... | USERS: 12,402</div>
                <div style="font-size: 18px; font-weight: bold;">
                    <span id="label-equity">EQUITY:</span> 
                    <span id="total-equity" style="color: var(--emerald);">0%</span>
                </div>
            </div>
            <div style="display: flex; gap: 15px; align-items: center;">
                <span id="sync-status" style="font-size: 10px; font-weight: bold; color: #e74c3c;">SYNC: OFF</span>
                <i class="fas fa-book book-active" onclick="showMission()"></i>
                <i class="fas fa-cog config-locked" id="btn-config" onclick="openConfig()"></i>
                <i class="fas fa-power-off" onclick="handleLogout()" style="color: var(--rose);"></i>
            </div>
        </header>

        <div class="level-nav">
            <div class="btn-lvl active" id="btn-l1" onclick="switchLevel(1)">LEVEL 1</div>
            <div class="btn-lvl" id="btn-l2" onclick="switchLevel(2)">LEVEL 2</div>
            <div class="btn-lvl" id="btn-l3" onclick="switchLevel(3)">LEVEL 3</div>
        </div>

        <div class="dashboard">
            <div class="col" id="col-radar">
                <div class="col-title">RADAR (BUY) <span id="slot-count">0/10</span></div>
                <div id="radar-list"></div>
            </div>
            <div class="col" id="col-active">
                <div class="col-title">ACTIVE (SELL)</div>
                <div id="active-list"></div>
            </div>
            <div class="col" id="col-vault">
                <div class="col-title">VAULT (HISTORY)</div>
                <div id="vault-list"></div>
            </div>
        </div>

        <div style="padding: 10px; background: #111; display: flex; justify-content: space-between; align-items: center;">
            <div id="rank-display" style="font-size: 12px; color: var(--gold);">RANK: TRAINING MEMBER</div>
            <a id="tele-group-link" href="https://t.me/+8uJ78T4VDHJkOTRl" target="_blank" style="color: white; text-decoration: none;">
                <i class="fab fa-telegram" style="font-size: 24px; color: #0088cc;"></i>
            </a>
        </div>
    </div>

    <div id="modal-container" class="modal-overlay">
        <div class="modal-content" id="modal-inner"></div>
    </div>

    <div id="floating-toast" class="toast"></div>

    <script>
        // --- DATA PRIVATE MASTER ---
        const MASTER_CONFIG = {
            adminId: "1319700866",
            adminPass: "MahadhareV13Master",
            botToken: "8295607704:AAFdy_U8bFL-x2Ol90n8f2KDOHXztybcuj4",
            groupId: "-1003254379333",
            links: {
                indodax: "https://indodax.onelink.me/qyYY/referral?deep_link_value=page:register,id:marselsalmon",
                gate: "https://app.mbm06.com/referral/earn-together/invite/BFZFVFlX?ref=BFZFVFlX&ref_type=103",
                jupiter: "https://jup.ag/?refId=yuf0dh4il1xs"
            }
        };

        let state = {
            user: null,
            lvl: 1,
            isSync: false,
            apiKeys: null,
            dailyTarget: { 1: 5, 2: 10, 3: 20 },
            todayProfit: 0,
            equity: 0,
            slots: [],
            vault: [],
            isMasterDevice: false,
            contractSigned: false
        };

        // --- SECURITY CORE ---
        function securityCheck() {
            // Anti F12 / Inspect
            const devtools = /./;
            devtools.toString = function() {
                triggerBreach();
            }
            
            setInterval(() => {
                if (window.outerWidth - window.innerWidth > 160 || window.outerHeight - window.innerHeight > 160) {
                    triggerBreach();
                }
            }, 1000);
        }

        function triggerBreach() {
            document.getElementById('security-breach').style.display = 'flex';
            localStorage.clear();
            throw new Error("SECURITY_BREACH");
        }

        function masterKnock() {
            let clicks = parseInt(sessionStorage.getItem('knock')) || 0;
            clicks++;
            if (clicks >= 5) {
                document.getElementById('tele-id').value = MASTER_CONFIG.adminId;
                document.getElementById('pass').value = MASTER_CONFIG.adminPass;
                showToast("ADMIN ACCESS RECOGNIZED");
                sessionStorage.removeItem('knock');
            } else {
                sessionStorage.setItem('knock', clicks);
            }
        }

        function lockMasterDevice() {
            state.isMasterDevice = true;
            localStorage.setItem('titan_master_lock', 'true');
            showToast("DEVICE PINNED AS MASTER");
        }

        // --- AUTH LOGIC ---
        let authMode = "LOGIN";
        function toggleAuthMode() {
            authMode = authMode === "LOGIN" ? "REGISTER" : "LOGIN";
            document.getElementById('auth-title').innerText = `TITAN V.13 ${authMode}`;
            document.getElementById('btn-auth-main').innerText = authMode === "LOGIN" ? "MASUK" : "DAFTAR 1: BIO-SCAN";
        }

        function handleAuth() {
            const id = document.getElementById('tele-id').value;
            const pass = document.getElementById('pass').value;

            if (authMode === "REGISTER") {
                showFaceScan(() => {
                    const userData = { id, pass, level: 1, joinDate: new Date().getTime(), trades: [], vault: [] };
                    localStorage.setItem('titan_user_' + id, encrypt(JSON.stringify(userData)));
                    showToast("PENDAFTARAN BERHASIL");
                    toggleAuthMode();
                });
            } else {
                const stored = localStorage.getItem('titan_user_' + id);
                if (stored) {
                    const decrypted = JSON.parse(decrypt(stored));
                    if (decrypted.pass === pass) {
                        state.user = decrypted;
                        startApp();
                    } else {
                        showToast("PASSWORD SALAH");
                    }
                } else if (id === MASTER_CONFIG.adminId && pass === MASTER_CONFIG.adminPass) {
                    state.user = { id: id, level: 3, isAdmin: true };
                    startApp();
                } else {
                    showToast("AKUN TIDAK DITEMUKAN");
                }
            }
        }

        function showFaceScan(callback) {
            const inner = document.getElementById('modal-inner');
            inner.innerHTML = `
                <h3>BIOMETRIC VERIFICATION</h3>
                <div id="face-scan-ui"><div class="scan-line"></div></div>
                <p>Posisikan wajah di dalam lingkaran</p>
            `;
            document.getElementById('modal-container').style.display = 'flex';
            setTimeout(() => {
                document.getElementById('modal-container').style.display = 'none';
                callback();
            }, 3000);
        }

        // --- APP ENGINE ---
        function startApp() {
            document.getElementById('auth-screen').style.display = 'none';
            document.getElementById('app').style.display = 'flex';
            securityCheck();
            
            if (!localStorage.getItem('contract_' + state.user.id)) {
                showContract();
            }
            
            setInterval(eyeOfGod, 7000); // Scan 30 coins every 7s
            setInterval(updateTickers, 3000);
            morningRecap();
        }

        function showContract() {
            const inner = document.getElementById('modal-inner');
            inner.innerHTML = `
                <h2 style="color:var(--gold)">KONTRAK MISI 120 HARI</h2>
                <div style="text-align:left; font-size:12px; margin:20px 0; max-height:300px; overflow-y:auto;">
                    <p><b>LEVEL 1: TRAINING (30 Hari)</b><br>Simulasi murni untuk membentuk psikologi trade. Saldo 1Jt - 1M. Target 5%/hari.</p><br>
                    <p><b>LEVEL 2: ELITE (30 Hari)</b><br>Manual Real Trade via Link Reff Admin. Sinkronisasi aset dompet asli. Target 10%/hari.</p><br>
                    <p><b>LEVEL 3: MASTER (60 Hari)</b><br>Autopilot 100%. API Bridge Locked. Sertifikasi Kelulusan MD5 setelah hari ke-120.</p>
                </div>
                <button onclick="signContract()" style="width:100%; padding:15px; background:var(--gold); border:none; font-weight:bold;">SAYA SETUJU & MULAI MISI</button>
            `;
            document.getElementById('modal-container').style.display = 'flex';
        }

        function signContract() {
            localStorage.setItem('contract_' + state.user.id, 'true');
            document.getElementById('modal-container').style.display = 'none';
            if (state.lvl === 1) promptInitialBalance();
        }

        function promptInitialBalance() {
            const val = prompt("Masukkan Modal Simulasi Level 1 (Min 1.000.000 - Max 1.000.000.000):", "10000000");
            const modal = parseInt(val);
            if (modal >= 1000000 && modal <= 1000000000) {
                state.equity = modal;
                state.user.initialBalance = modal;
                updateEquityDisplay();
            } else {
                alert("Nominal tidak sesuai syarat.");
                promptInitialBalance();
            }
        }

        // --- TRADING LOGIC (EYE OF GOD) ---
        async function eyeOfGod() {
            // Simulated Fetching 30 Coins
            const coins = ['BTC', 'ETH', 'SOL', 'BNB', 'XRP', 'ADA', 'DOGE', 'MATIC', 'DOT', 'PEPE', 'SHIB', 'LTC', 'AVAX', 'LINK', 'TRX', 'UNI', 'BCH', 'FIL', 'ARB', 'OP'];
            const radarList = document.getElementById('radar-list');
            
            // Check Target Lock
            const isTargetReached = (state.todayProfit >= state.dailyTarget[state.lvl]);
            if (isTargetReached) {
                radarList.classList.add('radar-locked');
            } else {
                radarList.classList.remove('radar-locked');
            }

            let html = '';
            const sortedCoins = coins.map(c => ({
                symbol: c,
                change: (Math.random() * 10 - 3).toFixed(2), // -3% to +7%
                price: (Math.random() * 50000).toFixed(2)
            })).sort((a, b) => b.change - a.change);

            sortedCoins.forEach(coin => {
                const isGlow = coin.change > 4;
                const strat = getStrategyType(coin.symbol);
                html += `
                    <div class="card ${isGlow ? 'glow-pulse' : ''}">
                        <div style="display:flex; justify-content:space-between">
                            <span><span class="strategy-label">${strat}</span> <b>${coin.symbol}</b></span>
                            <span style="color:${coin.change > 0 ? 'var(--emerald)' : 'var(--rose)'}">${coin.change}%</span>
                        </div>
                        <div class="sparkline">${generateSparkline(coin.change > 0)}</div>
                        <div style="display:flex; justify-content:space-between; align-items:center;">
                            <span style="font-size:10px; color:#aaa">API: ${getBursa()}</span>
                            ${state.lvl !== 3 ? `<button onclick="executeBuy('${coin.symbol}', ${coin.price}, '${strat}')" style="background:var(--emerald); border:none; padding:4px 10px; border-radius:4px; color:black; font-weight:bold; cursor:pointer">BUY</button>` : ''}
                        </div>
                    </div>
                `;
            });
            radarList.innerHTML = html;

            if (state.lvl === 3 && state.isSync) autopilotEngine(sortedCoins[0]);
        }

        function getStrategyType(symbol) {
            const rand = Math.random();
            if (rand < 0.4) return 'SCALP';
            if (rand < 0.8) return 'SMART';
            return 'MOONSHOT';
        }

        function getBursa() {
            const b = ['INDODAX', 'GATE.IO', 'JUPITER'];
            return b[Math.floor(Math.random() * b.length)];
        }

        // --- EXECUTION ---
        function executeBuy(symbol, price, strat) {
            if (state.slots.length >= 10) return showToast("SLOT PENUH (Maks 10)");
            
            const slot = {
                id: Date.now(),
                symbol,
                entry: price,
                strat,
                amount: calculateAlokasi(strat),
                profit: 0
            };
            
            state.slots.push(slot);
            renderActive();
            updateSlotCount();
            
            if (state.lvl === 2) {
                window.open(MASTER_CONFIG.links.indodax, '_blank');
            }
        }

        function renderActive() {
            const list = document.getElementById('active-list');
            list.innerHTML = state.slots.map(s => {
                const liveProfit = (Math.random() * 5 - 1).toFixed(2);
                return `
                    <div class="card">
                        <div style="display:flex; justify-content:space-between">
                            <b>${s.symbol}</b>
                            <span class="profit-pulse" style="color:${liveProfit > 0 ? 'var(--emerald)' : 'var(--rose)'}">${liveProfit}%</span>
                        </div>
                        <div style="font-size:10px; margin:5px 0">Entry: ${s.entry} | Strat: ${s.strat}</div>
                        ${state.lvl !== 3 ? `<button onclick="executeSell(${s.id}, ${liveProfit})" style="width:100%; background:var(--rose); border:none; padding:6px; border-radius:4px; font-weight:bold; cursor:pointer">SELL</button>` : ''}
                    </div>
                `;
            }).join('');
        }

        function executeSell(id, profit) {
            const idx = state.slots.findIndex(s => s.id === id);
            const slot = state.slots[idx];
            
            state.todayProfit += parseFloat(profit);
            state.vault.unshift({ ...slot, exitProfit: profit, time: new Date().toLocaleTimeString() });
            state.slots.splice(idx, 1);
            
            renderActive();
            renderVault();
            updateEquityDisplay();
            updateSlotCount();
            
            if (state.lvl === 2) window.open(MASTER_CONFIG.links.indodax, '_blank');
        }

        function renderVault() {
            const list = document.getElementById('vault-list');
            list.innerHTML = state.vault.map(v => `
                <div class="card" style="opacity:0.7">
                    <div style="display:flex; justify-content:space-between; font-size:11px">
                        <span>${v.symbol} (${v.strat})</span>
                        <span style="color:${v.exitProfit > 0 ? 'var(--emerald)' : 'var(--rose)'}">${v.exitProfit}%</span>
                    </div>
                    <div style="font-size:9px; color:#666">${v.time}</div>
                </div>
            `).join('');
        }

        // --- AUTOPILOT L3 ---
        function autopilotEngine(bestCoin) {
            if (bestCoin.change > 4 && state.slots.length < 10) {
                executeBuy(bestCoin.symbol, bestCoin.price, getStrategyType(bestCoin.symbol));
                sendTelegramSignal(bestCoin);
            }
            
            // Auto Take Profit logic
            state.slots.forEach(s => {
                let p = (Math.random() * 10);
                if (p > 7) executeSell(s.id, p); // TP 7%
                else if (p < -4) executeSell(s.id, -4); // SL 4%
            });
        }

        // --- LEVEL SWITCHING ---
        function switchLevel(lvl) {
            if (!state.user.isAdmin && lvl > state.lvl) {
                return showToast(`LEVEL ${lvl} TERKUNCI`);
            }
            
            state.lvl = lvl;
            document.querySelectorAll('.btn-lvl').forEach(b => b.classList.remove('active'));
            document.getElementById('btn-l' + lvl).classList.add('active');
            
            // Visual Config Toggle
            const configBtn = document.getElementById('btn-config');
            if (lvl === 3) {
                configBtn.classList.remove('config-locked');
                if (!state.isSync) openConfig();
            } else {
                configBtn.classList.add('config-locked');
            }

            updateEquityDisplay();
            renderActive();
            renderVault();
        }

        function openConfig() {
            if (state.lvl < 3 && !state.user.isAdmin) return showToast("KHUSUS LEVEL 3 MASTER");
            
            const inner = document.getElementById('modal-inner');
            inner.innerHTML = `
                <h3>API BRIDGE SETUP</h3>
                <div style="margin:20px 0">
                    <select id="bursa-select" style="width:100%; padding:10px; background:#222; color:white; margin-bottom:10px">
                        <option>INDODAX</option>
                        <option>GATE.IO</option>
                        <option>JUPITER</option>
                    </select>
                    <input type="text" id="api-key" placeholder="API Key" style="width:100%; padding:10px; margin-bottom:10px">
                    <input type="password" id="api-secret" placeholder="API Secret" style="width:100%; padding:10px">
                </div>
                <button onclick="syncAPI()" style="width:100%; padding:15px; background:var(--emerald); border:none; font-weight:bold; color:black">SYNC & LOCK API</button>
            `;
            document.getElementById('modal-container').style.display = 'flex';
        }

        function syncAPI() {
            state.isSync = true;
            document.getElementById('sync-status').innerText = "SYNC: ON";
            document.getElementById('sync-status').style.color = "var(--emerald)";
            document.getElementById('modal-container').style.display = 'none';
            state.equity = 15420500; // Simulated real balance
            updateEquityDisplay();
            showToast("AUTOPILOT ACTIVATED");
        }

        // --- HELPERS ---
        function updateEquityDisplay() {
            const el = document.getElementById('total-equity');
            const label = document.getElementById('label-equity');
            
            if (state.lvl === 3 && !state.isSync) {
                label.innerText = "PROFIT %:";
                el.innerText = state.todayProfit.toFixed(2) + "%";
            } else {
                label.innerText = "EQUITY:";
                el.innerText = "Rp " + state.equity.toLocaleString('id-ID');
            }
        }

        function updateSlotCount() {
            document.getElementById('slot-count').innerText = `${state.slots.length}/10`;
        }

        function showToast(msg) {
            const t = document.getElementById('floating-toast');
            t.innerText = msg;
            t.style.display = 'block';
            setTimeout(() => t.style.display = 'none', 3000);
        }

        function showMission() {
            const missionText = {
                1: "LEVEL 1: Fokus pada simulasi. Selesaikan 30 hari untuk naik ke peringkat ELITE.",
                2: "LEVEL 2: Manual Real Trade. Pastikan saldo dompet sinkron dengan APK via Link Reff.",
                3: "LEVEL 3: Autopilot Penuh. AI akan mengeksekusi sinyal Smart & Moonshot secara agresif."
            };
            alert(missionText[state.lvl]);
        }

        function calculateAlokasi(strat) {
            const base = state.equity / 10;
            if (strat === 'SCALP') return base * 0.4;
            if (strat === 'SMART') return base * 0.4;
            return base * 0.2;
        }

        function generateSparkline(up) {
            const color = up ? '#2ecc71' : '#e74c3c';
            return `<svg viewBox="0 0 100 30" preserveAspectRatio="none"><polyline fill="none" stroke="${color}" stroke-width="2" points="0,${Math.random()*30} 20,${Math.random()*30} 40,${Math.random()*30} 60,${Math.random()*30} 80,${Math.random()*30} 100,${Math.random()*30}"/></svg>`;
        }

        function encrypt(txt) { return CryptoJS.AES.encrypt(txt, 'SECRET_KEY_TITAN').toString(); }
        function decrypt(txt) { return CryptoJS.AES.decrypt(txt, 'SECRET_KEY_TITAN').toString(CryptoJS.enc.Utf8); }

        // --- TELEGRAM BOT LOGIC ---
        function sendTelegramSignal(coin) {
            if (state.lvl !== 3) return;
            const msg = `ðŸš€ TITAN V.13 SIGNAL (L3)\n\nCoin: ${coin.symbol}\nStrategy: SMART/MOONSHOT\nEntry: ${coin.price}\n\n[EKSEKUSI DI BURSA]`;
            const url = `https://api.telegram.org/bot${MASTER_CONFIG.botToken}/sendMessage?chat_id=${MASTER_CONFIG.groupId}&text=${encodeURIComponent(msg)}&reply_markup={"inline_keyboard":[[{"text":"KLIK EKSEKUSI","url":"${MASTER_CONFIG.links.indodax}"}]]}`;
            fetch(url);
        }

        function morningRecap() {
            const now = new Date();
            if (now.getHours() === 8 && now.getMinutes() === 0) {
                const msg = `ðŸ“Š MORNING RECAP TITAN\nTotal Profit Kemarin: ${state.todayProfit}%\nStatus Node: ACTIVE`;
                fetch(`https://api.telegram.org/bot${MASTER_CONFIG.botToken}/sendMessage?chat_id=${MASTER_CONFIG.groupId}&text=${encodeURIComponent(msg)}`);
            }
        }

        function updateTickers() {
            const nodes = ["SINGAPORE", "TOKYO", "NEW YORK", "LONDON"];
            const node = nodes[Math.floor(Math.random()*nodes.length)];
            const users = (12000 + Math.random()*500).toFixed(0);
            document.getElementById('node-ticker').innerText = `NODE: ${node} | ACTIVE USERS: ${users}`;
        }

        function handleLogout() {
            if (state.slots.length > 0 && state.lvl > 1) {
                if (!confirm("Masih ada posisi aktif! Dana mungkin tidak terpantau. Logout?")) return;
            }
            localStorage.removeItem('titan_user_session');
            location.reload();
        }

        window.onload = () => {
            // Load state logic here
        };
    </script>
</body>
</html>
